var ab="Sciformation VectorMol (c) 2012-2019 Felix Rudolphi",M=Math,ac=90,ad=120,ae=180,af=M.PI/ae,ag=1/af,ah=2*M.atan(M.SQRT2),ai=ah*ag,aj=360,ak=21600,T=true,F=false,al,S=" ",am="px",an=Number.MAX_VALUE,ao="obj",C="C",H="H",ap="\nM  ",aq="SUP",ar="MUL",as="SRU",at=".menuPopup",au=".menuWithPopup",av=[0,2,1,3],aw="font-size",ax="stroke",ay="stroke-opacity",az="stroke-width",aA="stroke-dasharray",aB="--",aC="text-anchor",aD="fill",aE="<sub>",aF="</sub>",aG="atom",aH="draw",aI="drawChain",aJ="drawHotspot",aK="selRect",aL="selLasso",aM="rotate",aN="3d_rotate",aO="bond_rotate",aP="delete",aQ="insertTemplate",aR="paste",aS="drawPlus",aT="drawArrow",aU="zoomIn",aV,aW,aX,aY,aZ,a0,a1,a2,a3,a4,a5=0,a6=new RegExp("^(\\d*)([A-Z%*][a-z#]{0,2})(H\\d*)?\\s*(\\d*[\\+\\-]+)?\\s*$"),a7={8:0,4:1.5},a8=0,a9=1,a_=2,ba=3,bb=4,bc=$.browser.msie,bd=(bc&&$.browser.version<=8);
be=parseInt;
function bf(a){if(bd){if(!a){a=window.event}a.returnValue=F;
a.cancelBubble=T}else{a.preventDefault();
a.stopPropagation()}return F}function stopPropagation(a){if(bd){if(!a){a=window.event}a.cancelBubble=T}else{a.stopPropagation()}}function bg(a){return a.length}function bh(){for(var c=0,b=0,a=bg(arguments);
b<a;
b++){c+=arguments[b]}return c/a}function bi(b){var e=[],f=[],d,c,a;
for(d in b){f.push(d)}f.sort();
for(c=0,a=bg(f);
c<a;
c++){d=f[c];
e[d]=b[d];
delete b[d]}for(c=0;
c<a;
c++){d=f[c];
b[d]=e[d]}}function bj(a,c){for(var b in a){if(a[b]==c){return b}}}function bk(b){if(!b){return b}var a=/^[\s\n\r\t]*(.*?)[\s\n\r\t]*$/;
if(a.exec(b)){return RegExp.$1}}function bl(e,h,j){if(!$.isArray(h)){return e}var a=[],f=0,b,g,d,c;
for(d=0,c=bg(h);
d<c;
d++){b=h[d];
g=e.substr(f,b);
if(!j){g=bk(g)}a.push(g);
f+=b}if(bg(e)>b){g=e.substr(f);
if(!j){g=bk(g)}a.push(g)}return a}function bm(d){for(var c=[],b,e=0,a=(d?bg(d):0);
e<a;
e++){if(d.charAt(e)==S){continue}b=d.indexOf(S,e+1);
if(b==-1){c.push(d.substr(e));
break}c.push(d.substring(e,b));
e=b}return c}function bn(b,c,a){var d=b.substr(0,bg(c));
if(a!=T){d=d.toLowerCase();
c=c.toLowerCase()}return(d==c)}function bo(c,d,b){var e=bg(c)-bg(d),a;
if(e<0){return F}a=c.substr(e);
if(b!=T){a=a.toLowerCase();
d=d.toLowerCase()}return(a==d)}function bp(b){if(b==al||b==""){return""}b=String(b);
var a="\n";
b=b.replace(/:/g,".");
b=b.replace(/\r\n/g,a);
b=b.replace(/\r/g,a);
b=b.replace(/\|/g,a);
return b}function bq(e,c){c=be(c);
if(isNaN(c)||c<1){return""}e=String(e);
for(var d="",b=0;
b<c;
b++){d+=e}return d}function br(a,b){return bs(a,b,S)}function bs(c,d,b){c=String(c);
if(bg(c)>d){return c.substr(0,d)}var a=bg(c);
while(a<d){a++;
c=b+c}return c}function bt(c,d,b){c=String(c);
if(bg(c)>d){return c.substr(0,d)}var a=bg(c);
while(a<d){a++;
c+=b}return c}function bu(a){a=String(a);
return a.replace(/(["\\])/g,"\\$1")}function bv(a){return'"'+bu(a)+'"'}function bw(a,b){if(a==al||a==null||(isNaN(a)&&typeof a=="number")){return b}return a}function bx(a){return bw(a,0)}function by(a){return bw(a,"")}function bz(b){b=String(b);
var a=b.match(/\-?\d+[\.,]?\d*/);
if(a!=null&&bg(a)>0){return by(a[0])}return""}function bA(c,b,a){return M.max(b,M.min(a,c))}function round(c,e,f){var g=1,d,b,a;
c=parseFloat(c);
e=be(e);
if(isNaN(c)||c==al){return""}if(f!=3){if(c==0){return 0}if(c<0){g=-1;
c*=-1}}b=M.pow(10,e);
switch(f){case 1:d=M.floor(M.log(c)/M.LN10);
break;
case 2:d=M.floor(M.log(c)/3/M.LN10)*3;
break;
case 3:return c.toFixed(bA(e,0,20));
break;
case 4:e-=M.ceil(M.log(c)/M.LN10);
return g*c.toFixed(bA(e,0,20));
break;
default:return(g*M.round(c*b)/b)
}switch(f){case 1:case 2:a=String(g*M.round(c/M.pow(10,d)*b)/b);
if(d==0){return a}return a+"&sdot;10<sup>"+d+"</sup>"}}function bB(c){var b=location.search,d,a;
if(b&&c){d=new RegExp("[&?]"+c+"=([^&$]*)");
if(a=d.exec(b)){return a[1]}}}function bC(){return a5++}function s(a){return by(langDef[a])}function bD(){if($.inArray(lang,bE)>=0){document.write('<script type="text/javascript" src="lang_'+lang+'.js"><\/script>')}}function bF(){$(".button, .wTooltip").attr("title",function(){return s(this.id)}).on("dragstart",bf)}function bG(){this.bH=bC();
this.bI=this.bH;
this.bJ=bJ}function bK(b,a,c){if(b.bL){c.bI=a.bI}b.bM[a.bH]=c}function bJ(a){return a!=al&&this.bI==a.bI}function bN(a){return a!=al&&this.bH==a.bH}function bO(a,b){return bP(a,b)>=0}function bP(b,d){for(var c=0,a=bg(b);
c<a;
c++){if(b[c].bJ(d)){return c}}return -1}function bQ(b,a){b.push.apply(b,a)}function bR(a,b){if(b!=al){a.push(b)}}function bS(a,c){for(var b=bg(a)-1;
b>=0;
b--){if(!bO(c,a[b])){a.splice(b,1)}}}function bT(b,a){for(var c,d=bg(b)-1;
d>=0;
d--){for(c=bg(a)-1;
c>=0;
c--){if(b[d].bJ(a[c])){b.splice(d,1);
break}}}}function bU(b,e,c){for(var d=0,a=bg(b);
d<a;
d++){if(b[d].bJ(e)){b[d]=c;
return T}}return F}function bV(d,b){if(b){for(var c=0,a=bg(b);
c<a;
c++){if(b[c].bJ(d)){b.splice(c,1);
return T}}}return F}function bW(a,b){if(b==al){b=1}if(b!=0){a.unshift.apply(a,a.splice(b,bg(a)))}}function bX(b,d){for(var c=0,a=bg(d);
c<a;
c++){if(!bO(b,d[c])){return F}}return T}function bY(e,d){var b=Array.apply(al,arguments),c=[],f,a;
if(bg(b)>2){e=b.pop();
d=bY.apply(al,b)}for(f=0,a=bg(e);
f<a;
f++){if(bO(d,e[f])){c.push(e[f])}}return c}function bZ(e,b){for(var c=[],d=0,a=bg(e);
d<a;
d++){if(!bO(b,e[d])){c.push(e[d])}}return c}function b0(c,b){for(var d=0,a=bg(b);
d<a;
d++){b1(c,b[d])}}function b1(a,b){if(b!=al&&!bO(a,b)){a.push(b);
return T}return F}function b2(a){if(a==al){return al}return this.bM[a.bH]}function b3(b){if(b==al){return al}var c=this.bM[b.bH],a;
if(!c){for(a in this.bM){if(b.bJ(this.bM[a])){return b}}c=b.b4(this);
this.bM[b.bH]=c}return c}function b5(a){this.bM={};
this.bL=a;
this.b2=b2;
this.b3=b3}function b6(a){return(720+a)%aj}function b7(a){var b=this.b4();
b.x+=a.x;
b.y+=a.y;
b.z+=a.z;
return b}function b8(b,a){var c=this.b4();
c.x-=b.x;
c.y-=b.y;
c.z=(a?0:c.z-b.z);
return c}function b9(b){var c=this,a=c.bg();
return(a>0?c.b_((b||1)/a):new ca())}function cb(b,a,d){var c=this;
if(b instanceof ca){c.x+=b.x;
c.y+=b.y;
c.z+=b.z}else{c.x+=b;
c.y+=a;
c.z+=bx(d)}}function cc(a){return(this.x==a.x&&this.y==a.y&&this.z==a.z)}function cd(g,e,c){var f=this,a,b,d;
if(f.bg()==0||f.ce(g)<0){return F}a=f.cf(g,e);
if(!a){return isNaN(a)}b=f.cf(e,c);
if(!b){return isNaN(b)}return(d=f.cf(c,g)?(a*b>0&&a*d>0):isNaN(d))}function cg(b,a){var d=this.ce(b.ch(a));
if(d==0&&this.ci(a)<b.ci(a)){return NaN}return d}function cj(a){var b=this;
return new ca(b.x*a,b.y*a,b.z*a)}function ck(b,a){if(b!=1){var c=this;
if(a){c.cl(-a.x,-a.y,-a.z)}c.x*=b;
c.y*=b;
c.z*=b;
if(a){c.cl(a)}}}function cm(b,a){var c=this;
if(b&1){c.x=2*a.x-c.x}if(b&2){c.y=2*a.y-c.y}}function cn(c,b){if(b){this.cl(-b.x,-b.y,-b.z)}var f=this,d=M.cos(c),e=M.sin(c),a=f.x*d-f.y*e;
f.y=f.x*e+f.y*d;
f.x=a;
if(b){f.cl(b)}}function co(d,c,a){if(a){this.cl(-a.x,-a.y,-a.z)}var g=this,b=M.cos(c),f=M.sin(c),e=g.z*b-g.x*f;
g.x=g.x*b+g.z*f;
b=M.cos(d);
f=M.sin(d);
g.z=g.y*f+e*b;
g.y=g.y*b-e*f;
if(a){g.cl(a)
}}function cp(i,h,g,f){var e=this,c=e.cq(i),b=e.cq(h),d=cr(c,b),a;
if(f){a=c.ch(b);
a=a.ch(d).cs();
if(a){d.ct(f*af,a)}}if(g){d=d.cs(g)}d.cl(e);
return d}function cu(a){var b=this.cq(a);
return M.abs(b.x)+M.abs(b.y)-M.abs(b.z)}function cv(g,e,d){var f=this,c=g.cq(f),b=e.cq(f),a=c.ch(b);
if(d){a=a.ch(d.cq(f))}return a.cs()}function cw(m,g,a){if(m){if(a){this.cl(-a.x,-a.y,-a.z)}var e=this,i=M.cos(m),h=1-i,f=M.sin(m),l=e.x,k=e.y,j=e.z,d=g.x,c=g.y,b=g.z;
e.x=l*(i+d*d*h)+k*(d*c*h-b*f)+j*(d*b*h+c*f);
e.y=l*(c*d*h+b*f)+k*(i+c*c*h)+j*(c*b*h-d*f);
e.z=l*(b*d*h-c*f)+k*(b*c*h+d*f)+j*(i+b*b*h);
if(a){e.cl(a)}}}function cx(){return M.sqrt(this.ce(this))}function cy(b,a){var c=this.cq(b);
if(a){c.z=0}return c.bg()}function cz(a){var b=this;
return b.x*a.x+b.y*a.y+b.z*a.z}function cA(b,a){var c=this;
if(a){c=c.cq(a);
b=b.cq(a)}return new ca(c.y*b.z-c.z*b.y,c.z*b.x-c.x*b.z,c.x*b.y-c.y*b.x)}function cB(g,d,b){var f=this,e=f.cq(g),c=f.cq(d),a=f.cq(b);
return e.ch(c).ce(a)}function cC(h,f,c){var a=this,i=h.cq(a),g=f.cq(a),d=c.cq(a),e=i.cD(g).cD(d),b=[];
b.push(e.ch(i).cs());
b.push(e.ch(g).cs());
b.push(e.ch(d).cs());
return b}function cE(b,c){if(c){return b6(this.cF(c)-this.cF(b))}else{var a=b.x-this.x,d=b.y-this.y;
if(!a&&!d){return 0}return b6(M.atan2(d,a)*ag)}}function cG(d,c){var e=this,b,a;
if(c){d=d.cq(e);
c=c.cq(e)}else{c=e}if((b=d.bg())&&(a=c.bg())){return b6(M.acos(d.ce(c)/b/a)*ag)}}function cH(b,a){return this.cI(b,a)>0}function cJ(b,a){var c=b.cK(a,T);
if(c>0){return M.abs(this.cI(b,a))/c}}function cL(b,a){return((a.x-b.x)*(this.y-b.y)-(a.y-b.y)*(this.x-b.x))}function cr(b,a){return new ca(0.5*(b.x+a.x),0.5*(b.y+a.y),0.5*(b.z+a.z))}function cM(c,b,a){return this.x>=M.min(c.x,b.x)-a&&this.x<=M.max(c.x,b.x)+a&&this.y>=M.min(c.y,b.y)-a&&this.y<=M.max(c.y,b.y)+a}function cN(f,e,c){for(var b=F,d=1,a=bg(f);
d<a;
d++){if((((f[d].y<=c)&&(c<f[d-1].y))||((f[d-1].y<=c)&&(c<f[d].y)))&&(e<(f[d-1].x-f[d].x)*(c-f[d].y)/(f[d-1].y-f[d].y)+f[d].x)){b=!b}}return b}function cO(c,b){var a=this;
if(b&&(b.x>a.x||b.x2<a.x||b.y>a.y||b.y2<a.y)){return F}return cN(c,a.x,a.y)}function cP(){return this.x+","+this.y}function cQ(b,a){return(this.x+b)+","+(this.y+a)}function cR(){var a=this;
return new ca(a.x,a.y,a.z)}function cS(f,e,b,a){var d=e*af,c=b*af;
return new ca(f.x+a*M.cos(c)*M.cos(d),f.y+a*M.cos(c)*M.sin(d),f.z+a*M.sin(c))}function cT(c,b,a){return cS(c,b,0,a)}function cU(e,d,c){var a=e.cK(d),b;
if(!a){return new ca()}b=c/a;
return new ca(b*(d.y-e.y),b*(d.x-e.x),0.5*(e.z+d.z))}function cV(e,d,a,c){var b,f;
if(c){b=1-c;
e.x=b*e.x+d.x*c;
e.y=b*e.y+d.y*c;
d.x=b*d.x+e.x*c;
d.y=b*d.y+e.y*c}if(a){f=cU(e,d,a);
e.x+=f.x;
d.x+=f.x;
e.y-=f.y;
d.y-=f.y}}function cW(d,c,b){var a=1;
if(d>c){a+=0.3*(d-c)/(b-c)}if(a<1.02){a=1}return a*a}function cX(n,b,q,l,g,o){var r=this,i=r.cY(),c=r.cZ.c0.b4(),a=r.c1.c0.b4(),f=r.c2(),e,k,p,j,h,m,d;
g=(g||1);
if(f){e=M.max(f.c3.z,0.5*c4);
k=bh(e,M.min(f.c5.z,-0.5*c4));
g=M.min(g*cW(a.z,k,e),3.5)*b;
b*=cW(c.z,k,e)}else{g*=b}if(!n[aA]&&(p=(c.cK(a,T)/c6))){l=bx(l)+c7;
cV(c,a,q,l);
j=c8*(a.y-c.y)/p;
h=c8*(a.x-c.x)/p;
d=i.path("M"+c.c9(-j*b,h*b)+"L"+c.c9(j*b,-h*b)+"L"+a.c9(j*g,-h*g)+"L"+a.c9(-j*g,h*g)+"Z");

if(!o){l-=c7+c_;
c=r.cZ.c0.b4();
a=r.c1.c0.b4();
cV(c,a,q,l);
j/=c8;
h/=c8;
n[az]=0;
m=i.path("M"+c.c9(-j*b,h*b)+"L"+c.c9(j*b,-h*b)+"L"+a.c9(j*g,-h*g)+"L"+a.c9(-j*g,h*g)+"Z").attr(aD,n[ax])}}else{cV(c,a,q,l);
d=i.path("M"+c+"L"+a);
n[az]=c6*M.min(b,g);
if(!o){m=i.path("M"+c+"L"+a)}}r.da.push(d.attr({fill:db,stroke:db,"stroke-width":dc*n[az]}));
if(m){r.da.push(m.attr(n))}}function dd(d,c){if(c||st.de||d.df||d.dg||d.dh||d.di!=C||d.dj!=al||!bg(d.dk)){return T}if(bg(d.dk)!=2){return F}for(var b=0,a=bg(d.dk);
b<a;
b++){if(d.dk[b].dl!=2){return F}}return T}function dm(a){var c=this,b;
if(c.da){if(a&&dn(c.da)){a.insertAfter(c.da)}c.da.remove()}else{if(a&&(b=c.getInsertBefore())){a.insertBefore(b)}}c.da=a}function dp(b){for(var e,d,c=0,a=bg(b);
c<a;
c++){d=b[c].da;
if(dn(d)){if(e){d.insertAfter(e)}e=d}}}function dq(b){var a;
if(b){if(!(a=b.node)&&bg(b)){a=b[0].node}}return(a&&a.parentNode)}function dn(a){var b;
if(a){if(!(b=a.node)&&bg(a)){b=a[bg(a)-1].node}}return(b&&b.parentNode)}function getInsertBefore(){for(var g=this,c=st.dr(),e=g.ds(),b=c.dt(F),f,d=0,a=bg(b);
d<a;
d++){f=b[d];
if(f.ds()>=e&&dq(f.da)){return f.da}}}function du(){this.da=al}function dv(){var d=this,c=d.cY(),a=0.5*dw,b=c.path("M-"+a+",0H"+a+"M0,-"+a+"V"+a).attr(ax,d.dx?dy:dz).attr(az,dA).transform("t"+d.c0).data(ao,d).mouseover(dB).mouseout(dC);
d.dm(b)}function dD(){var a=this,b=a.cY(),d,e=0.5*dE,i=0.5*(1-dF),h=a.dG.b4(),g=a.dG.b4(),c=a.dH.b4(),j=a.dH.b4(),f=dz;
if(a.dI){f=dJ}else{if(a.dx){f=dy}}cV(c,h,e,i);
cV(j,g,-e,i);
d=b.path("M"+a.dH+"L"+a.dG+"L"+h+"M"+a.dG+"L,"+g).attr(ax,f).attr(az,dA).data(ao,a).mouseover(dK).mouseout(dL);
a.dm(d);
dM(a)}function dN(a){a.remove()}function dO(b){var a=this;
if(a.da){a.da.forEach(dN);
a.da.clear()}else{a.da=b.set()}return a.da}function dP(){if(!this.dQ&&!this.dR&&!this.dS){var N=this,o=N.c2(),j,u,E,B,k,f,J,g,m,b,D,I,l,t,r,G,z,n,L,A,h,a,w,p,v,q=N.cY(),y={},e=N.cZ.c0,d=N.c1.c0,K=bh(e.z,d.z),x=dz,c=(N.df?1.3:1);
if(o){o.dT();
j=o.c5.z;
u=bh(o.c3.z,j)}if(N.dI){x=dJ}else{if(N.dx){x=dy}}if(N.df){x=tinycolor.mix(x,"#00f",50)}if(K<u&&j<u){x=tinycolor(x);
y[ax]=x.brighten(0.13*(255-x.getBrightness())*(u-K)/(u-j)).toString()}else{y[ax]=x}N.dO(q);
switch(N.dl){case 1.5:case 2:h=0;
a=bg(N.cZ.dk);
w=bg(N.c1.dk);
if((a==1||w==1)&&(a>=3||w>=3||a==w)){}else{p=N.dU();
if(bg(p)){f=0;
for(E=0,B=bg(p);
E<B;
E++){A=bg(p[E].dV);
if(!k||A<f){f=A;
k=p[E]}}J=k.dW()}else{J=new ca();
g=0;
for(E=0,B=bg(N.cZ.dk);
E<B;
E++){m=N.cZ.dk[E];
b=(N.cZ.bJ(m.cZ)?m.c1:m.cZ);
if(b.bJ(N.c1)){continue}J.x+=b.c0.x;
J.y+=b.c0.y;
g++}for(E=0,B=bg(N.c1.dk);
E<B;
E++){m=N.c1.dk[E];
b=(N.c1.bJ(m.cZ)?m.c1:m.cZ);
if(b.bJ(N.cZ)){continue}J.x+=b.c0.x;
J.y+=b.c0.y;
g++}if(g){J.x/=g;
J.y/=g}}h=(e.cF(d)-J.cF(d))*af;
if(M.abs(h)>M.PI){h*=-1}}if((h+2*M.PI)%M.PI>0.01||(a==2&&w==2)||(p&&bg(p))){N.dX(y,c);
if(N.dl==1.5){y[aA]=[aB]}N.dX(y,c,2*(h>0?-1:1),0.15)}else{N.dX(y,c,-1,-0.05);
if(N.dl==1.5){y[aA]=[aB]}N.dX(y,c,1,-0.05)}break;
case 3:N.dX(y,c,-1.5,0.15),N.dX(y,c),N.dX(y,c,1.5,0.15);
break;
default:if(N.dY!=0){J=(N.dY!=1);

N.dX(y,c,0,0,(J?2:4),J)}switch(N.dY){case 1:break;
case 4:y[az]=c6*c;
D=e.cK(d);
l=1.5;
I=2;
if(D){G=0;
I/=D;
t=I*(d.y-e.y);
r=I*(d.x-e.x);
n=0;
v="M"+e;
for(E=0;
E<=D;
E+=l){G++;
n=E/D;
z=(G%2?1:-1);
v+="L"+(e.x*(1-n)+(d.x+t*z)*n)+","+(e.y*(1-n)+(d.y-r*z)*n)}N.da.push(q.path(v).attr(y))}break;
case 6:y[az]=c6*c;
D=e.cK(d);
l=2;
I=2;
if(D){I/=D;
t=I*(d.y-e.y);
r=I*(d.x-e.x);
v="";
for(E=0;
E<=D;
E+=l){n=E/D;
L=1-n;
v+="M"+(e.x*L+n*(d.x+t))+","+(e.y*L+n*(d.y-r))+"L"+(e.x*L+n*(d.x-t))+","+(e.y*L+n*(d.y+r))}N.da.push(q.path(v).attr(y))}break;
default:if(N.dl==0){y[aA]=[aB]}N.dX(y,c)}}}else{this.dm()}dM(this)}function dZ(a,c){var b=this;
a.d0.attr(aw,16*c).attr(az,c6);
a.bbox=a.d0.getBBox(T);
a.d1=b.d2.rect(a.bbox.x-a.d3,a.bbox.y-a.d3,a.bbox.width+2*a.d3,a.bbox.height+2*a.d3,1.5).attr(aD,a.db).attr(az,0).insertBefore(a.d0);
b.d4.push(a.d1,a.d0);
b.d5.push(a)}function d6(b,a){var e=this,d,c;
if(d7){if(b){e.x+=b;
e.d0.node.setAttribute("x",e.x);
e.d1.node.setAttribute("x",e.x-e.d3)}if(a){e.y+=a;
e.d0.node.setAttribute("y",e.y);
e.d1.node.setAttribute("y",e.y-e.d3)}}else{e.x+=bx(b);
e.y+=bx(a);
d=M.round(e.x*ak);
c=M.round(e.y*ak);
e.d0.shape.path=" m"+d+","+c+" l"+(d+1)+","+c+" e"}}function d8(b,h,f,i,e,g,c,d){var a=this;
a.d2=b;
a.x=h;
a.y=f;
a.db=g;
a.d3=bx(c);
a.d0=a.d2.text(h,f,i).attr(ax,e).attr(aD,e).attr(aC,"start");
if(d){a.d0.attr("font-weight","bold")}a.bbox=a.d0.getBBox(T);
a.d9=d6}function d_(){for(var c=this,b=0,a=bg(c.d5);
b<a;
b++){c.d5[b].d0.insertAfter(c.d4)}return this.d4}function ea(c,a){var b=this;
b.d2=c;
b.d4=a;
b.d5=[];
b.eb=dZ;
b.d_=d_}function ec(){if(!this.dR&&!this.dQ&&!this.dS){var I=this,v=I.cY(),x=I.c0,z=I.ed(),l,a,j,J=db,d=I.ee(),t=d.ef,e,b,q,E,f,u,g,r,k,n,y,c,h=0,G=0,D=0,o,w=0.8,B,A,m=I.df;
if(!v){return}if(t&&eg=="tmpl"&&d.bJ(t.eh)){J=ei}if(I.dI){j=dJ}else{j=dz}if(m||d.bJ(ej)){a=(this.ek?el:em)}else{if(I.dx){a=dy}}I.dO(v);
if(!dd(I,z)){if(a||J!=db){l=v.rect(x.x-en*eo,x.y-en*eo,2*en*eo,2*en*eo);
if(a){l.attr(ax,a).attr(az,c6)}else{l.attr(az,0)}if(J!=db){l.attr(aD,(ep?"red":J))}I.da.push(l)}}else{e=new ea(v,I.da);
b=!!(A=bg(I.dk));
for(B=0;
B<A;
B++){q=I.dk[B];
o=eq(q.cZ,q.c1)+90;
if(I.bJ(q.c1)){o+=ae}o%=aj;
if(o>ae){b=F;
break}}E=new d8(v,0,0,I.di+(st.de?I.getIndex()+1:""),j,J,eo,m);
E.d0.attr(aC,"middle");
f=er*es/E.bbox.height;
e.eb(E,f);
u=E.bbox.width*0.5;
G-=u;
h-=u;
D+=u;
g=I.et();
if(g&&!b){r=new d8(v,D,0,H,j,db,eo,m);
e.eb(r,f);
D+=r.bbox.width;
if(g>1){k=new d8(v,D,0.4*E.bbox.height,g,j,db,eo,m);
e.eb(k,f*w)}}if(z||I.dg){n="";
if(z&&M.abs(z)!=1){n+=M.abs(z)}if(z){n+=(z>0?"+":"\u2013")}if(I.dg==1){n+=":"}else{if(I.dg==2){n+="."}else{if(I.dg==3){n+=".."}}}y=new d8(v,D,-0.5*E.bbox.height,n,j,db,eo,m);
e.eb(y,f*w)}if(I.dh){c=new d8(v,0,-0.5*E.bbox.height,M.round(I.dh),j,db,eo,m);
e.eb(c,f*w);
G-=c.bbox.width;
c.d9(G)}if(g&&b){if(g>1){k=new d8(v,0,0.4*E.bbox.height,g,j,db,eo,m);
e.eb(k,f*w);
h=M.min(G,h-k.bbox.width);
k.d9(h)}r=new d8(v,0,0,H,j,db,eo,m);
e.eb(r,f);
h-=r.bbox.width;
r.d9(h)}I.da.transform("t"+x);
if(a){I.da.push(v.rect(x.x+h-eo,x.y-E.bbox.height*0.5,D-h+2*eo,E.bbox.height).attr(ax,a).attr(az,c6))
}}}else{this.dm()}dM(this)}function eu(){if(!this.ev&&!this.dS){var b=this,f,d,e,l,j,k={},c=b.cY(),m=new ea(c,b.dO(c)),a,h,g;
if(b.type==aq){a=b.dW();
h=new d8(c,a.x,a.y,b.di,dz,db,eo,(b.dx?dy:al));
h.d0.attr(aC,"middle");
g=er*es/h.bbox.height;
m.eb(h,g)}else{a=b.ew();
k[ax]=(b.dx?dy:dz);
k[az]=c6;
for(f=0,d=bg(b.ex);
f<d;
f++){e=b.ex[f];
l=e.dH.b4();
j=e.dG.b4();
cV(l,j,es*0.4*(a.ey(l,j)?-1:1));
b.da.push(c.path("M"+l+"L"+e.dH+"L"+e.dG+"L"+j).attr(k))}if(b.di){j=b.ez(3);
h=new d8(c,j.x+es*0.3,j.y+es*0.3,b.di,dz,db,eo);
g=er*es/h.bbox.height;
m.eb(h,g);
b.da.push(m.d_())}}if(c==aV){b.da.click(function(i){b.eA(i);
return bf(i)}).mousedown(bf).mouseup(eB)}}else{this.dm()}dM(this)}function ca(a,d,c){var b=this;
b.x=bx(a);
b.y=bx(d);
b.z=bx(c);
b.cD=b7;
b.cq=b8;
b.cs=b9;
b.cl=cb;
b.eC=ck;
b.eD=cn;
b.eE=co;
b.ct=cw;
b.eF=cv;
b.eG=cp;
b.eH=cu;
b.eI=cm;
b.bJ=cc;
b.bg=cx;
b.cK=cy;
b.b_=cj;
b.ce=cz;
b.ch=cA;
b.eJ=cB;
b.eK=cC;
b.cF=cE;
b.ci=cG;
b.ey=cH;
b.cf=cg;
b.eL=cJ;
b.cI=cL;
b.eM=cd;
b.cM=cM;
b.cO=cO;
b.b4=cR;
b.toString=cP;
b.c9=cQ}function eN(){var a=this;
bG.apply(a);
a.moveBy=a.cl=eO;
a.rotateBy=a.eD=eP;
a.rotate3D=a.eE=eQ;
a.rotateAround=a.eR=eS;
a.rotateAroundUnit=a.ct=eT;
a.flip=a.eI=eU;
a.getCenter=a.dW=eV;
a.eW=eX;
a.dm=eY;
a.du=eZ}function e0(){var a=this;
bG.apply(a);
a.ee=e1;
a.dm=dm;
a.dO=dO;
a.du=du;
a.getInsertBefore=getInsertBefore}function e2(b,a){if(a){bV(b,a)}b.dS=T;
b.dm();
dM(b)}function e3(b){for(var c=0,a=bg(b);
c<a;
c++){e2(b[c])}b.length=0}function e4(d,c){var e=d.ds(),f=c.ds();
if(e<f){return -1}if(e>f){return 1}return 0}function e5(c){for(var d=[],b=0,a=bg(c);
b<a;
b++){b1(d,e6(c[b]))}return d}function e6(a){if(!a||a.e7||a.dS){return}var b=a.cY();
if(b){b1(b.e7,a);
a.e7=T}return b}function dM(a){if(!a||!a.e7){return}var b=a.cY();
if(b){bV(a,b.e7);
a.e7=al}}function e8(){dp(st.dr().dt(F))}function e9(d){var b,a,c;
if($.isArray(d)){for(b=0,a=bg(d);
b<a;
b++){e9(d[b])}}else{while(bg(d.e7)){c=d.e7.pop();
if(c.dS){c.dm()}else{c.e7=al;
c.eW()}}if(c){e8();
d.renderfix()}}}function resetDirty(b){while(bg(b.e7)){var a=b.e7.pop();
a.e7=al}}function e_(){var d=this,c,e,b,a;
if(!d.c5||!d.c3){d.c5=new ca(an,an,an);
d.c3=new ca(-an,-an,-an);
c=d.fa(T);
if(!bg(c)){c=d.fa()}for(b=0,a=bg(c);
b<a;
b++){e=c[b];
fb(d,e.x);
fc(d,e.y);
fd(d,e.z)}}}function fb(b,a){if(a>b.c3.x){b.c3.x=a
}if(a<b.c5.x){b.c5.x=a}}function fc(b,a){if(a>b.c3.y){b.c3.y=a}if(a<b.c5.y){b.c5.y=a}}function fd(b,a){if(a>b.c3.z){b.c3.z=a}if(a<b.c5.z){b.c5.z=a}}function eV(){if(!this.fe){var e=this,b=new ca(),d=e.fa(T),c,a;
if(!bg(d)){d=e.fa()}for(c=0,a=bg(d);
c<a;
c++){b.cl(d[c])}if(a>1){b.x/=a;
b.y/=a;
b.z/=a}e.fe=b}return this.fe}function eY(){if(this.da){dm.apply(this)}for(var c=this.dt(T),b=0,a=bg(c);
b<a;
b++){c[b].dm()}}function eZ(){if(this.da){du.apply(this)}for(var c=this.dt(T),b=0,a=bg(c);
b<a;
b++){c[b].du()}}function eX(){var a=e5(this.dt(F));
e9(a)}function eO(c,b,f){for(var e=this.fa(),d=0,a=bg(e);
d<a;
d++){e[d].cl(c,b,f)}this.ff(a8);
e5(this.dt(F))}function eP(f,b){var e,d,a,c,g=this;
if(!b){b=g.dW().b4();
c=T}e=g.fa();
for(d=0,a=bg(e);
d<a;
d++){e[d].eD(f,b)}g.ff((c?a9:ba));
e5(g.dt(F))}function eQ(e,d,b){var f,c,a,g=this;
if(!b){b=g.dW().b4()}f=g.fa();
for(c=0,a=bg(f);
c<a;
c++){f[c].eE(e,d,b)}g.ff(ba);
e5(g.dt(F))}function eT(f,c,b){for(var g=this,e=g.fa(),d=0,a=bg(e);
d<a;
d++){e[d].ct(f,c,b)}g.ff(ba);
e5(g.dt(F))}function eS(e,b,d){var a,c;
if(a=b.cK(d)){c=d.cq(b);
c.eC(1/a);
this.ct(e,c,b)}}function fg(d,b){var e,c,a,f=this;
if(!b){b=f.dW().b4()}e=f.fa();
for(c=0,a=bg(e);
c<a;
c++){e[c].eC(d,b)}f.ff(ba);
e5(f.dt(F))}function eU(c,b){if(!b){b=this.dW()}for(var e=this.fa(),d=0,a=bg(e);
d<a;
d++){e[d].eI(c,b)}this.ff(a8);
e5(this.dt(F))}function fh(){return 0}function fi(){return an}function fj(){return this.c0.z}function fk(a){bV(a,this.fl)}function fm(){var b=this,a;
if(b.ef){for(a=bg(b.ef.dk)-1;
a>=0;
a--){b.fn(b.ef.dk[a])}for(a=bg(b.ef.dV)-1;
a>=0;
a--){b.fo(b.ef.dV[a])}}else{b.ef=new fp()}b.fq=new fr(aV);
b.fq.fs(b.ef);
b.ft=new b5();
b.ft.fu=T}function fv(){var a=this;
return !a.fq||!a.ef||(!a.fq.fw&&!bg(a.ef.dV)&&!bg(a.ef.dk))}function fx(){for(var c=this.fq.dt(F),b=0,a=bg(c);
b<a;
b++){c[b].eW();
aV.fy.push(c[b].da)}}function fz(c,a){var b=this;
b.fw=new fA(c,a);
b.fw.dI=T;
b.fq.fB(b.fw);
return b.fw}function fC(a){var b=this.ft.b3(a);
fD(b,a);
bQ(b.dk,a.dk);
this.ef.fE(b);
return b}function fF(b){var c=b.dQ,a=b;
if(!c){c=b;
a=b.fG}e2(c,this.ef.dV);
delete c.dQ;
if(a){delete a.e7;
e6(a);
delete a.dQ}}function fH(a){var b=this.ft.b3(a);
fD(b,a);
this.ef.fI(b);
return b}function fD(c,a){c.dI=T;
c.fG=a;
var b;
if((b=c.ef)&&a.ef){b.dI=T;
b.fG=a.ef;
if(b=b.fJ){b.dI=T;
b.fG=a.ef.fJ}}a.dQ=c}function fK(b){var c=b.dQ,a=b;
if(!c){c=b;
a=b.fG}e2(c,this.ef.dk);
delete c.dQ;
if(a){delete a.e7;
e6(a);
delete a.dQ}}function fL(b){for(var d,c=0,a=bg(b.dV);
c<a;
c++){d=this.fE(b.dV[c]);

d.dk=[]}for(c=0,a=bg(b.dk);
c<a;
c++){this.fI(b.dk[c])}}function fM(c){for(var b=0,a=bg(c.fN);
b<a;
b++){this.fs(c.fN[b])}}function fO(){var a=this;
a.fE=fC;
a.fo=fF;
a.fI=fH;
a.fn=fK;
a.fs=fL;
a.fP=fM;
a.fQ=fz;
a.eW=fx;
a.fR=fm;
a.fS=fv;
a.fR()}function e1(){return(this.fG?this.fG:this)}fT={H:{fU:1,m:1.00794,v:1,fV:T,fW:1.007825,fX:{1:1.007825,2:2.0141018,3:3.0160493}},D:{fU:1,m:2.01402,v:1,fW:2.014102},T:{fU:1,m:3.0160492,v:1,fW:3.0160492},He:{fU:2,m:4.002602,fW:4.002603,fX:{3:3.0160293,4:4.0026032}},Li:{fU:3,fY:T,m:6.941,fZ:7,fW:7.016005,fX:{5:5.0125378,6:6.0151223,7:7.016004}},Be:{fU:4,fY:T,m:9.012182,fZ:6,fW:9.012183,fX:{7:7.0169292,9:9.0121821,10:10.0135337}},B:{fU:5,m:10.811,v:3,fZ:5,fW:11.009305,fX:{10:10.012937,11:11.0093055}},C:{fU:6,m:12.011,v:4,fV:T,fW:12,fX:{11:11.0114338,12:12,13:13.0033548,14:14.003242}},N:{fU:7,m:14.00674,v:5,fW:14.003074,fX:{13:13.0057386,14:14.003074,15:15.0001089,17:17.0084497}},O:{fU:8,m:15.9994,v:6,fW:15.994915,fX:{14:14.0085953,15:15.0030654,16:15.9949146,17:16.9991315,18:17.9991604,19:19.0035787,20:20.0040761,21:21.0086546}},F:{fU:9,m:18.9984032,v:7,fW:18.998403,fX:{17:17.0020952,18:18.0009377,19:18.9984032,20:19.9999813,21:20.9999489}},Ne:{fU:10,m:20.1797,fW:19.992439,fX:{19:19.0018798,20:19.9924402,21:20.9938467,22:21.9913855,23:22.9944673,24:23.9936151}},Na:{fU:11,fY:T,m:22.989768,fZ:7,fW:22.98977,fX:{21:20.9976551,22:21.9944368,23:22.9897697,24:23.9909633,25:24.9899544}},Mg:{fU:12,fY:T,m:24.305,fZ:6,fW:23.985045,fX:{22:21.9995741,23:22.9941248,24:23.9850419,25:24.985837,26:25.982593,27:26.9843407,28:27.9838767}},Al:{fU:13,fY:T,m:26.9811539,fZ:5,fW:26.981541,fX:{25:24.9904286,26:25.9868917,27:26.9815384,28:27.9819102,29:28.9804448}},Si:{fU:14,m:28.0855,v:4,fW:27.976928,fX:{27:26.9867048,28:27.9769265,29:28.9764947,30:29.9737702,31:30.9753633,32:31.9741481}},P:{fU:15,m:30.973762,v:5,fW:30.973763,fX:{29:28.9818014,30:29.9783138,31:30.9737615,32:31.9739072,33:32.9717253,34:33.9736364}},S:{fU:16,m:32.066,v:6,fW:31.972072,fX:{31:30.9795544,32:31.9720707,33:32.9714585,34:33.9678668,35:34.9690321,36:35.9670809,37:36.9711257,38:37.9711634,39:38.9751353}},Cl:{fU:17,m:35.4527,v:7,fW:34.968853,fX:{33:32.9774518,34:33.973762,35:34.9688527,36:35.9683069,37:36.9659026,38:37.9680106,39:38.9680077,40:39.9704156,41:40.9706502}},Ar:{fU:18,m:39.948,fW:39.962383,fX:{36:35.9675463,37:36.9667759,38:37.9627322,39:38.9643134,40:39.9623831,41:40.9645008,42:41.9630464,43:42.9656707,44:43.9653653,45:44.968095}},K:{fU:19,fY:T,m:39.0983,fZ:17,fW:38.963708,fX:{38:37.9690801,39:38.9637069,40:39.9639987,41:40.961826,42:41.9624031,43:42.9607157,44:43.9615561,45:44.9606997,46:45.9619762}},Ca:{fU:20,fY:T,m:40.078,fZ:16,fW:39.962591,fX:{40:39.9625912,41:40.9622783,42:41.9586183,43:42.9587668,44:43.9554811,45:44.9561859,46:45.9536928,47:46.9545465,48:47.9525335,49:48.9556733}},Sc:{fU:21,fY:T,m:44.95591,fZ:15,fW:44.955914,fX:{43:42.961151,44:43.959403,45:44.9559102,46:45.9551703,47:46.952408,48:47.952235,49:48.9500241}},Ti:{fU:22,fY:T,m:47.867,fZ:14,fW:47.947947,fX:{44:43.9596902,45:44.9581243,46:45.9526295,47:46.9517638,48:47.9479471,49:48.9478708,50:49.9447921,51:50.946616,52:51.9468982}},V:{fU:23,fY:T,m:50.9415,fZ:13,fW:50.943963,fX:{47:46.9549069,48:47.9522545,49:48.9485169,50:49.9471628,51:50.9439637,52:51.9447797,53:52.9443425}},Cr:{fU:24,fY:T,m:51.9961,fZ:12,fW:51.94051,fX:{48:47.9540359,49:48.9513411,50:49.9460496,51:50.9447718,52:51.9405119,53:52.9406538,54:53.9388849,55:54.9408442,56:55.9406452}},Mn:{fU:25,fY:T,m:54.93805,fZ:11,fW:54.938046,fX:{51:50.9482155,52:51.9455701,53:52.9412947,54:53.9403632,55:54.9380496,56:55.9389094,57:56.9382875}},Fe:{fU:26,fY:T,m:55.845,fZ:10,fW:55.934939,fX:{52:51.9481165,53:52.9453123,54:53.9396148,55:54.938298,56:55.9349421,57:56.9353987,58:57.9332805,59:58.9348805,60:59.9340769,61:60.9367495}},Co:{fU:27,fY:T,m:58.9332,fZ:9,fW:58.933198,fX:{55:54.9420031,56:55.9398439,57:56.9362962,58:57.9357576,59:58.9332002,60:59.9338222,61:60.9324794,62:61.9340542}},Ni:{fU:28,fY:T,m:58.6934,fZ:10,fW:57.935347,fX:{56:55.9421363,57:56.9398005,58:57.9353479,59:58.9343516,60:59.9307906,61:60.9310604,62:61.9283488,63:62.9296729,64:63.9279696,65:64.930088,66:65.9291152}},Cu:{fU:29,fY:T,m:63.546,fZ:7,fW:62.929599},Zn:{fU:30,fY:T,m:65.39,fZ:6,fW:63.929145},Ga:{fU:31,m:69.723,fZ:5,fW:68.925581},Ge:{fU:32,m:72.61,fW:73.921179},As:{fU:33,m:74.92159,fW:74.921596},Se:{fU:34,m:78.96,fW:79.916521},Br:{fU:35,m:79.904,v:7,fW:78.918336},Kr:{fU:36,m:83.8,fW:83.911506},Rb:{fU:37,fY:T,m:85.4678,fZ:17,fW:84.9118},Sr:{fU:38,fY:T,m:87.62,fZ:16,fW:87.905625},Y:{fU:39,fY:T,m:88.90585,fZ:15,fW:88.905856},Zr:{fU:40,fY:T,m:91.224,fZ:14,fW:89.904708},Nb:{fU:41,fY:T,m:92.90638,fZ:13,fW:92.906378},Mo:{fU:42,fY:T,m:95.94,fZ:12,fW:97.905405},Tc:{fU:43,fY:T,m:97.9072,fZ:11},Ru:{fU:44,fY:T,m:101.07,fZ:10,fW:101.904348},Rh:{fU:45,fY:T,m:102.9055,fZ:9,fW:102.905503},Pd:{fU:46,fY:T,m:106.42,fZ:8,fW:105.903475},Ag:{fU:47,fY:T,m:107.8682,fZ:7,fW:106.905095},Cd:{fU:48,fY:T,m:112.411,fZ:6,fW:113.903361},In:{fU:49,fY:T,m:114.818,fZ:5,fW:114.903875},Sn:{fU:50,fY:T,m:118.71,fW:119.902199},Sb:{fU:51,m:121.76,fW:120.903824},Te:{fU:52,m:127.6,fW:129.906229},I:{fU:53,m:126.90447,v:7,fW:126.904477},Xe:{fU:54,m:131.29,fW:131.904148},Cs:{fU:55,fY:T,m:132.90543,fZ:17,fW:132.905433},Ba:{fU:56,fY:T,m:137.327,fZ:16,fW:137.905236},La:{fU:57,fY:T,m:138.9055,fZ:15,fW:138.906355},Ce:{fU:58,fY:T,m:140.115,fZ:15,fW:139.905442},Pr:{fU:59,fY:T,m:140.90765,fZ:15,fW:140.907657},Nd:{fU:60,fY:T,m:144.24,fZ:15,fW:141.907731},Pm:{fU:61,fY:T,m:144.9127,fZ:15},Sm:{fU:62,fY:T,m:150.36,fZ:15,fW:151.919741},Eu:{fU:63,fY:T,m:151.965,fZ:15,fW:152.921243},Gd:{fU:64,fY:T,m:157.25,fZ:15,fW:157.924111},Tb:{fU:65,fY:T,m:158.92534,fZ:15,fW:158.92535},Dy:{fU:66,fY:T,m:162.5,fZ:15,fW:163.929183},Ho:{fU:67,fY:T,m:164.93032,fZ:15,fW:164.930332},Er:{fU:68,fY:T,m:167.26,fZ:15,fW:165.930305},Tm:{fU:69,fY:T,m:168.9342,fZ:15,fW:168.934225},Yb:{fU:70,fY:T,m:173.04,fZ:15,fW:173.938873},Lu:{fU:71,fY:T,m:174.967,fZ:15,fW:174.940785},Hf:{fU:72,fY:T,m:178.49,fZ:14,fW:179.946561},Ta:{fU:73,fY:T,m:180.9479,fZ:13,fW:180.948014},W:{fU:74,fY:T,m:183.84,fZ:12,fW:183.950953},Re:{fU:75,fY:T,m:186.207,fZ:11,fW:186.955765},Os:{fU:76,fY:T,m:190.23,fZ:10,fW:191.961487},Ir:{fU:77,fY:T,m:192.217,fZ:9,fW:192.962942},Pt:{fU:78,fY:T,m:195.08,fZ:8,fW:194.964785},Au:{fU:79,fY:T,m:196.96654,fZ:7,fW:196.96656},Hg:{fU:80,fY:T,m:200.59,fZ:6,fW:201.970632},Tl:{fU:81,fY:T,m:204.3833,fZ:5,fW:204.97441},Pb:{fU:82,fY:T,m:207.2,fZ:4,fW:207.976641},Bi:{fU:83,fY:T,m:208.98037,fZ:3,fW:208.980388},Po:{fU:84,fY:T,m:208.9824},At:{fU:85,m:209.9871},Rn:{fU:86,m:222.0176},Fr:{fU:87,fY:T,m:223.0197},Ra:{fU:88,fY:T,m:226.0254},Ac:{fU:89,fY:T,m:227.0278},Th:{fU:90,fY:T,m:232.0381,fW:232.038054},Pa:{fU:91,fY:T,m:231.03588},U:{fU:92,fY:T,m:238.0289,fW:238.050786},Np:{fU:93,fY:T,m:237.0482},Pu:{fU:94,fY:T,m:244.0642},Am:{fU:95,fY:T,m:243.0614},Cm:{fU:96,fY:T,m:247.0703},Bk:{fU:97,fY:T,m:247.0703},Cf:{fU:98,fY:T,m:251.0796},Es:{fU:99,fY:T,m:252.083},Fm:{fU:100,fY:T,m:257.0915},Md:{fU:101,fY:T,m:256.094},No:{fU:102,fY:T,m:259.1009},Lr:{fU:103,fY:T,m:262.11},Rf:{fU:104,fY:T,m:261.11},Db:{fU:105,fY:T,m:268},Sg:{fU:106,fY:T,m:271},Bh:{fU:107,fY:T,m:270},Hs:{fU:108,fY:T,m:277},Mt:{fU:109,fY:T,m:276},Ds:{fU:110,fY:T,m:281},Rg:{fU:111,fY:T,m:272},Cn:{fU:112,fY:T},"%":{f0:T},M:{f0:T},X:{f0:T},Ln:{f0:T}};

function f1(){if(!this.ef){return -1}return bP(this.ef.dV,this)}function f2(a){return br(round(a/es,4,3),10)}function f3(){var e=0,g=this,d=br("0",3),f=(g.dj!=al?g.dj+1:0),a=g.f4(),b=M.round(bx(g.f5)),c=g.f6;
if(g.dh&&c){e=M.round(g.dh-c.m);
if(e<-3||e>4){e=0}}if(!c||a==c.v){a=0}else{if(a==0){a=15}}if(b!=0&&M.abs(b)<4){b=4-b}else{if(b!=4){b=0}}return"\n"+f2(g.c0.x)+f2(-g.c0.y)+f2(g.c0.z)+S+bt(g.di,3,S)+br(e,2)+br(b,3)+d+br(f,3)+d+br(a,3)+bq(d,6)}function f7(a){if(a){a=a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}this.di=a;
this.f8=al;
this.f6=fT[a]}function f9(b){if(!b){return}var e=0,d,a,g,f;
for(d=0,a=bg(b);
d<a;
d++){g=b.charAt(d);
if(g=="+"){e++}else{if(g=="-"){e--}}}f=bz(b);
if(f===""){return e}return f*e}function f_(b){if(b==H){return 1}if(b){if(b.charAt(0)==H){var a=be(b.substr(1));
if(!isNaN(a)){return a}}}return al}function ga(p,r){var w=this,e,m,b,v,n,f,u,d,g,j,q,o,h=0,a=0,t,k,l=w.ek;
if(l&&l.type==ar){return}if(!r&&(e=gb(p))){if(l){return}m=w.ef;
b=m.fJ;
v=w;
n=1;
u=e.gc();
d=u.ef;
if(bg(w.dk)>1){if(bg(u.dk)>1){v=new gd(ge(w.ee(),1));
if(w.dI){v=gf.fE(v)}f=new gg(w,v,1,0);
if(w.dI){f=gf.fI(f)}else{m.fE(v);
m.fI(f)}}else{n=2;
f=u.dk[0]}}else{f=w.dk[0]}d.cl(v.c0.cq(u.c0));
if(f){g=eq(f.cZ,f.c1)+((f.c1.bJ(v)||f.c1.bJ(v.fG))?ae:0)-u.gh(1);
d.eD(g*af,v.c0)}if(w.dI){d.eh=al;
gf.fs(d);
u=u.dQ}else{b.gi(m,d);
if(w.dx){st.gj().fs(d)}}if(n==2){m.gk(u,v)}else{if(!w.dI){m.gk(v,u)}}}else{w.dg=0;
j="";
for(q=0,o=bg(p);
q<o;
q++){t=p.charAt(q);
if(t=="."){h++}else{if(t==":"){a++}else{j+=t}}}if(a==1){w.dg=1}else{if(h>0){w.dg=h+1}}if(k=a6.exec(j)){w.dh=bw(be(k[1]),0);
w.gl(k[2]);
w.dj=f_(k[3]);
w.f5=f9(k[4])}w.ff(bb)}}function gm(b){var c,f,d,a,e;
if(c=this.f6){if(a=this.dh){if((f=c.fX)&&(f=f[a])){return f}e=c.fU;
f=a-e;
d=15.67*a-17.23*M.pow(a,2/3)-0.714*e*(e-1)*M.pow(a,-1/3)-23.2875*M.pow(f-e,2)/a;
if(!(a%2)){d+=11.2*M.pow(a,-0.5)*(e%2?-1:1)}return(939.553*f+938.259*e-d)/931.494061}else{return(b?c.fW:c.m)}}}function gn(b,a){this.go=a;
this.cF=eq(b,a)}function gp(d,c){if(d.cF<c.cF){return -1}if(d.cF>c.cF){return 1}return 0}function gq(l,o){var k=(o?o.concat():[]),m,f=this.ee(),a=bg(f.dk),p,q,c,e,b,d,n,h=0,g;
for(c=0;
c<a;
c++){p=f.dk[c];
q=(p.cZ.bJ(f)?p.c1:p.cZ);
k.push(new gn(f,q))}a=bg(k);
k.sort(gp);
if(l){m=f.c0.cF(l);
for(c=0;
c<a;
c++){b=(c+1)%a;
e=k[c].cF;
d=(k[b].cF+aj)%aj;
if(b==0&&(m<d||e<m)){m=0.5*(e+d+aj);
break}else{if(e<m&&m<d){m=0.5*(e+d);
break}}}}else{for(c=0;
c<a;
c++){b=(c+1)%a;
n=(720+k[b].cF-k[c].cF)%aj;
if(n>h){h=n;
g=c}}m=k[g].cF+0.5*h}return m}function gr(){var c=this.ee(),e,a,b,d=c.c0,f=d.z;
for(b=bg(c.dk)-1;
b>=0;
b--){e=c.dk[b];
a=(e.cZ.bJ(c)?e.c1:e.cZ);
if(M.abs(a.c0.z-f)>0.05*d.cK(a.c0)){return F}}return T}function gs(b){var e=this,d=bg(e.dk),a,c;
if(b){if(d==2){for(c=0;
c<d;
c++){a=e.dk[c].gt(e);
if(!a.bJ(b)){return a}}}}else{if(d==1){return e.dk[0].gt(e)}}return al}function gu(g,e){var f,d=this.ee(),c=bg(d.dk),h,i,b,a;
if(!c){if(e){f=d.c0.cF(e)}else{f=-30}}else{if(c==1){h=d.dk[0];
i=d.gv();
if(g+h.dl==4){f=eq(d,i)+ae}else{if(e){f=eq(d,i);
f+=M.round((d.c0.cF(e)-f+720)/60)*60}else{b=i.gv(d);

if(b){a=(eq(i,d,b)+ae)%aj}f=eq(d,i)+ad*(a<ae?1:-1)}}}else{f=d.gw(e)}}return f}function gx(){for(var b=0,c=0,a=bg(this.dk);
c<a;
c++){b+=this.dk[c].dl}return b}function gy(b){if(b){var c=this,a=c.ed();
c.f5=a+b;
c.ff(bb);
e6(c)}}function gz(){var b=this,a=$.inArray(b.dg,av);
a++;
a%=bg(av);
b.dg=av[a];
b.ff(bb);
e6(b)}function gA(c,a){var b=this;
if(!a){a=[]}else{if(bO(a,b)){return}}a.push(b);
b.z=al;
if(c>ba){b.gB=al;
b.gC=al}a.pop()}function gD(){if(this.f8==al){if(!this.f6){return}return this.f6.v}else{return this.f8}}function gE(a){if(a==al){return an}var d=this,c=d.gx(),b;
if(d.dg==1||d.dg==3){c+=2}else{if(d.dg==2){c++}}b=bx(d.f5);
return(a-b<4?a-c-M.abs(b):8-a-c+b)}function gF(){var d=this,b=d.f4(),c,a;
if(b==al){d.gC=0;
d.gB=0}else{a=d.dj;
if(a==al){a=d.gB=d.gG(b)}if(a<0&&d.f6){d.gB=0;
c=d.f6.fU;
if(c==5){d.gC=a}else{if(c>10){if(a<8-2*b){a=8-2*b-a}else{a%=2}}d.gC=-a}}else{d.gC=0}if(d.gB>4||d.gB>b+1){d.gB=0}}}function gH(){var a=this;
if(a.dj!=al){return a.dj}if(a.gB==al){a.gI()}return a.gB}function gJ(){var a=this;
if(a.f5!=al){return a.f5}if(a.gC==al){a.gI()}return a.gC}function gK(b){if(this.fG){return this.fG.b4(b)}if(!b){b=new b5()}var c=this,a=new gd(c.c0.b4());
bK(b,c,a);
a.gl(c.di);
a.dj=c.dj;
a.dR=c.dR;
a.f5=c.f5;
a.dg=c.dg;
a.dh=c.dh;
a.f8=c.f8;
a.ek=b.b3(c.ek);
a.dx=c.dx;
a.dI=c.dI;
return a}function gL(){var b=this,a=0;
if(b.di!=C){a+=2}if(b.dh){a+=3}if(b.dg){a+=3}if(b.f5){a+=2}return a}function gM(){if(st.gN||st.gO()){return}var c=this,b,a,d;
gf.fR();
switch(gP){case aG:b=gf.fE(c);
b.ga(gQ());
gf.eW();
break;
case aH:case aI:if(!gR&&!gS){d=ge(c,gT);
b=gf.fE(c);
a=gf.fE(new gd(d));
gf.fI(new gg(b,a,gT,gU));
a.ga(gQ());
gf.eW()}break;
case aP:if(gR){c.ef.fo(c)}break}}function gV(){gf.fR()}function cY(){if(this.d2){return this.d2}if(this.ef){return this.ef.cY()}}function gW(d){if(d){for(var e,b=this.ef,c=0,a=bg(this.dk);
c<a;
c++){e=this.dk[c];
if((e.cZ.bJ(d)||e.c1.bJ(d))&&(!b||bO(b.dk,e))){return e}}}}function gX(){return this.c0}function gY(a){if(!a||!this.dR){return[this.c0]}return[]}function gZ(d,c){if(this.bJ(d)){return}if(c){if(bO(c.dV,this)){return c}}else{c=new g0(T)}c.fE(this);
for(var b=0,a=bg(this.dk);
b<a;
b++){this.dk[b].g1(d,c)}return c}function g2(){if(!this.g3){this.g3=[];
var b=this.ef.dU(),c,a;
for(c=0,a=bg(b);
c<a;
c++){if(bO(b[c].dV,this)){this.g3.push(b[c])}}}return this.g3}function g4(){if(this.z==al){for(var d=this,b=d.c0.z,c=0,a=bg(d.dk);
c<a;
c++){b=M.max(d.dk[c].ds(),b)}d.z=b+0.000001}return this.z}function gd(b){var a=this;
e0.apply(a);
a.di=C;
a.dk=[];
a.dR=F;
a.dg=0;
a.dh=0;
a.c0=b;
a.dx=F;
a.dW=gX;
a.fa=gY;
a.g5=gW;
a.dU=g2;
a.ga=ga;
a.gl=f7;
a.getIndex=f1;
a.gw=gq;

a.g6=gr;
a.gv=gs;
a.gh=gu;
a.f4=gD;
a.gG=gE;
a.gx=gx;
a.g7=gy;
a.g8=gz;
a.ff=gA;
a.gI=gF;
a.et=gH;
a.ed=gJ;
a.g9=gm;
a.g_=gL;
a.g1=gZ;
a.getMolecule=ha;
a.hb=f3;
a.eW=ec;
a.ds=g4;
a.b4=gK;
a.cY=cY;
a.hc=gM;
a.hd=gV}function he(d){if(!d){d=new b5()}var e=this,b=new e.constructor(),c,a;
bK(d,e,b);
for(c=0,a=bg(e.dk);
c<a;
c++){e.dk[c].b4(d)}for(c=0,a=bg(e.hf);
c<a;
c++){e.hf[c].b4(d)}for(c=0,a=bg(e.dV);
c<a;
c++){b.fE(d.b3(e.dV[c]),T)}for(c=0,a=bg(e.hg);
c<a;
c++){b.hh(d.b3(e.hg[c]),T)}for(c=0,a=bg(e.dk);
c<a;
c++){b.fI(d.b3(e.dk[c]),T)}for(c=0,a=bg(e.hf);
c<a;
c++){b.hi(d.b3(e.hf[c]),T)}b.di=e.di;
b.hj=e.hj;
if(e.ex){for(c=0,a=bg(e.ex);
c<a;
c++){b.ex.push(e.ex[c].b4())}}b.hk=e.hk;
b.ev=e.ev;
return b}function hl(d){for(var c=this,b=0,a=bg(c.dV);
b<a;
b++){c.dV[b].dR=d}for(b=0,a=bg(c.dk);
b<a;
b++){c.dk[b].dR=d}for(b=0,a=bg(c.hf);
b<a;
b++){c.hf[b].dR=al}c.ev=!d;
e5(c.dV);
e5(c.dk);
e5(c.hf)}function hm(){for(var d=this,c,b=0,a=bg(d.dV);
b<a;
b++){d.dV[b].dR=T}for(b=0,a=bg(d.hg);
b<a;
b++){d.hg[b].dR=al}for(b=0,a=bg(d.dk);
b<a;
b++){c=d.dk[b];
c.dR=(c.cZ.dR||c.c1.dR)&&!d.hn(c)}d.ev=F;
e5(d.dV);
e5(d.dk);
e5(d.hf)}function ho(){for(var c=this,b=0,a=bg(c.dV);
b<a;
b++){c.dV[b].dR=al}for(b=0,a=bg(c.dk);
b<a;
b++){c.dk[b].dR=al}c.ev=al;
e5(c.dV);
e5(c.dk);
e5(c.hf)}function hp(b){var a=b1(this.dV,b);
if(a){b.ek=this}return a}function hq(a){if(this.type!=as){return b1(this.hg,a)}return F}function hr(a){return bO(this.hf,a)}function hs(b){if(bO(this.hf,b)){return F}var a=b1(this.dk,b);
if(a){b.ek=this}return a}function ht(c,b,a,d){if(bO(a,c[b].cZ)){d[2*b]=c[b].cZ;
d[2*b+1]=c[b].c1}else{d[2*b]=c[b].c1;
d[2*b+1]=c[b].cZ}}function createGroup(){var d=st.gj(),b,c,a;
if(!d.hu){return}a=d.dV[0].ef;
hv(T);
if(bg(d.hf)<=1){c=prompt(s("supaQ"),"")}else{c=prompt(s("multQ"),"")}hv(F);
if(c==null){return}hw();
b=a.hx(c,d.dV,d.dk,d.hf);
d.hy(b);
b.eW();
hz(aV);
return b}function hA(c){for(var e,f,g,b,d=0,a=bg(this.ex);
d<a;
d++){g=this.ex[d].dH;
b=g.x+c*g.y;
if(e==al||b>f){e=g;
f=b}g=this.ex[d].dG;
b=g.x+c*g.y;
if(b>f){e=g;
f=b}}return e}function hB(a){var d=a.dW(),h=d.b4(),g=d.b4(),f=a.cZ.c0,e=a.c1.c0,c=hC*(e.x-f.x),b=hC*(e.y-f.y);
h.cl(b,-c);
g.cl(-b,c);
this.ex.push(new hD(h,g))}function hE(){this.ex=[];
for(var b=0,a=bg(this.hf);
b<a;
b++){this.hF(this.hf[b])}}function hG(b){if($.isArray(b)){for(var c=0,a=bg(b);
c<a;
c++){this.hi(b[c])}}else{if(this.type!=ar){if(bO(this.dV,b.cZ)){this.hh(b.cZ)}else{if(bO(this.dV,b.c1)){this.hh(b.c1)}}}bV(b,this.dk);

b1(this.hf,b)}}function hH(d){var e=this,b=[],c=0,a=bg(e.hg);
if(d&&!e.ev&&a){for(;
c<a;
c++){b.push(e.hg[c].c0)}}else{for(a=bg(e.dV);
c<a;
c++){b.push(e.dV[c].c0)}}if(e.ex){for(c=0,a=bg(e.ex);
c<a;
c++){b.push(e.ex[c].dH,e.ex[c].dG)}}bR(b,e.fe);
return b}function hI(){var a=this;
if(!a.c5||!a.c3){e_.apply(a);
a.c5.x-=hJ;
a.c5.y-=hJ;
a.c3.x+=hJ;
a.c3.y+=hJ}}function hK(){if(st.gO()){return}switch(gP){case aP:if(gR){this.ef.hL(this);
break}default:var a=this,d,c,b=a.cY(),f=[],j,h,g=0,e=(d7?1:1/hM);
a.dT();
a.hN=0;
hO(b.hP);
j=b.set();
j.push(b.text(2,2,"Ph").attr(aw,2).attr("fill-opacity",0.8),b.path("M2,2L4,2L5,3.5L4,5L2,5L1,3.5Z M2.5,2.5L4,2.5 M4.5,3.5L3.5,4.75 M2.5,4.75L1.5,3.5").attr(ax,"#f00").attr(az,c6).attr(ay,0.85),b.path("M1,0L2,2").attr(ax,hQ).attr(az,c6));
f.push(j.transform("t"+(a.c3.x)+","+(a.c5.y+g)).data(ao,a).mousedown(bf).mouseup(eB).click(hR));
h=j.getBBox();
a.hN+=h.width*1.5*e;
g+=h.height*1.3*e;
if(a.type==aq){f.push(b.path(a.ev?"M0,4H4L2,2.5Z M0,0H4L2,1.5Z":"M0,1.5H4L2,0Z M0,2.5H4L2,4Z").transform("t"+(a.c3.x+e)+","+(a.c5.y+g)).attr(ax,hQ).attr(az,c6).attr(aD,"silver").data(ao,a).mousedown(bf).mouseup(eB).click(hS))}b.hP.push(b.rect(a.c5.x,a.c5.y,a.c3.x+a.hN-a.c5.x,a.c3.y-a.c5.y).attr(hT).attr(ay,0.85).data(ao,a).mouseout(hU));
for(d=0,c=bg(f);
d<c;
d++){b.hP.push(f[d])}b.hP.insertAfter(b.hV)}}function hS(c,a,d,b){if(!b){b=this.data(ao)}hw();
b.hW(b.ev);
b.ef.ff(ba);
hX=al;
hY(aV);
hZ(T);
b.eW();
hz(aV);
return bf(c)}function h0(h){var c=this,g=c.ef,b=by(c.di),f,i,l,j,d=st.gj(),a,k;
hv(T);
if(c.type==aq){b=prompt(s("supaQ"),b)}else{b=prompt(s("multQ"),b)}hv(F);
if(b==null){return}k=be(b);
hw();
if(c.type==ar||(c.type==as&&k<h1&&k>1)){if(c.type==ar){f=c.hg.concat()}else{f=c.dV.concat()}i=c.dk.concat();
l=c.hf.concat();
if(j=c.dx){d.hL(c)}c.h2(l,i);
a=g.hx(b,f,i,l);
if(j){d.hy(a)}a.eW()}else{c.di=b;
c.hj=k;
c.eW()}hz(aV)}function hR(c,a,d,b){if(!b){b=this.data(ao)}hw();
b.h2();
hz(aV);
return bf(c)}function hU(){}function h3(j,b,g){var e=j[bg(j)-1],d=0,c=bg(e.dk),h,f,a;
for(;
d<c;
d++){h=e.dk[d];
f=(h.cZ.bJ(e)?h.c1:h.cZ);
if(bO(j,f)){continue}if(h.bJ(b)){return h}if(bO(g,f)){j.push(f);
a=h3(j,b,g);
if(a){return a}j.pop()}}}function h4(p,m){var c=this,k=c.ef,o,n,h,f,e,b,g,a,d=st.gj(),l;
if(c.type==ar){o=c.hg;
n=bZ(c.dV,o);
if(!p){p=c.hf.concat()}if((b=bg(p))==2){for(e=0;
e<b;
e++){for(h=0,f=bg(o);
h<f;
h++){a=o[h];
g=h3([a],p[e],n);
if(!g){continue}l=g.dx;
k.fn(g,T);
if(bO(n,g.cZ)){g.cZ=a}else{g.c1=a}a.dk.push(g);
g.ek=al;
k.fI(g);
if(m){m.push(g)}if(l){d.fI(g)}}}for(h=0,f=bg(n);
h<f;
h++){k.fo(n[h],T)}}}if(c.bJ(hX)){hX=al;
hY(aV)}c.dm();
while(bg(c.dV)){g=c.dV.pop();
g.ek=al;
g.dR=al;
e6(g)}while(bg(c.dk)){g=c.dk.pop();
g.ek=al;
g.dR=al;
e6(g)}c.hg=[];
e2(c,c.h5.h6);
e2(c,k.h6);
d.hL(c);
if(m){bS(m,k.dk);

bT(m,p)}}function h7(){if(!this.ef){return -1}return bP(this.ef.h6,this)}function h8(b){for(var a=bg(b)-1;
a>=0;
a--){b[a]=parseFloat(b[a])}this.ex.push(new hD(new ca(b[0],-b[1]),new ca(b[2],-b[3])))}function h9(){if(!this.h_){var b=new ca(),d,c,a=bg(this.ex);
if(a>1){for(c=0;
c<a;
c++){d=this.ex[c];
b.cl(d.dH);
b.cl(d.dG)}b.x/=a*2;
b.y/=a*2}this.h_=b}return this.h_}function ia(){return new hD(this.dH.b4(),this.dG.b4())}function hD(b,a){this.dH=b;
this.dG=a;
this.b4=ia}function ib(e,b){if(!b){b=[]}else{if(bO(b,this)){return}}b.push(this);
var d=this,c,a;
if(e==ba){d.fe=al;
d.h_=al}if(e>a8&&e<bb){d.c5=al;
d.c3=al;
for(c=0,a=bg(d.hf);
c<a;
c++){d.hf[c].ff(ba,b)}d.ic()}if(e!=a8){e=ba}for(c=0,a=bg(d.dV);
c<a;
c++){d.dV[c].ff(e,b)}for(c=0,a=bg(d.dk);
c<a;
c++){d.dk[c].ff(e,b)}b.pop()}function ie(){var a=this;
e0.apply(a);
a.dV=[];
a.hg=[];
a.dk=[];
a.hf=[];
a.hN=0;
a.getIndex=h7;
a.ff=ib;
a.h2=h4;
a.fE=hp;
a.hh=hq;
a.hn=hr;
a.fI=hs;
a.hi=hG;
a.dW=eV;
a.dT=hI;
a.fa=hH;
a.b4=he;
a.cY=cY;
a.hc=hK;
a.hd=hU;
a.eA=h0;
a.eW=eu;
a.ds=fi}function ig(){ie.apply(this);
this.type=aq;
this.ic=ih;
this.hW=hl}function ii(){var a=this;
ie.apply(a);
a.type=ar;
a.ex=[];
a.ez=hA;
a.ij=h8;
a.hF=hB;
a.ic=hE;
a.ew=h9;
a.hW=hm}function ik(){ii.apply(this);
this.type=as;
this.hW=ho}function il(e){if(this.fG){return this.fG.b4(e)}if(!e){e=new b5()}var f=this,d,c,a,b;
if(e.fu){if(d=f.cZ.dQ){c=d}if(d=f.c1.dQ){a=d}}if(!c){c=e.b3(f.cZ)}if(!a){a=e.b3(f.c1)}b=new gg(c,a,f.dl,f.dY);
bK(e,f,b);
b.dR=f.dR;
b.ek=e.b3(f.ek);
b.dx=f.dx;
return b}function im(){if(!this.fe){this.fe=cr(this.cZ.c0,this.c1.c0)}return this.fe}function io(f,c){if(!c){c=[]}else{if(bO(c,this)){return}}c.push(this);
if(f==ba){this.fe=al}if(f<bb){var b=this.ef,d,a,e;
if(b){for(d=0,a=bg(b.h6);
d<a;
d++){e=b.h6[d];
if(bO(e.hf,this)){e.ff(ba,c)}}}}c.pop()}function ip(){var b=this,a=b.dl;
a=(bj(a7,a)||a);
if(!b.cZ||!b.c1||b.cZ.bJ(b.c1)){return""}return"\n"+br(b.cZ.getIndex()+1,3)+br(b.c1.getIndex()+1,3)+br(a,3)+br(b.dY,3)+bq(br("0",3),3)}function iq(){if(!this.g3){var d=this,c,b,a;
if(!d.cZ.h5){d.ef.ir(T)}c=d.cZ.h5.dU();
d.g3=[];
for(b=0,a=bg(c);
b<a;
b++){if(bO(c[b].dk,d)){d.g3.push(c[b])}}}return this.g3}function it(){var a=0;
if(this.dY){a+=4}switch(this.dl){case 2:a+=2;
break;
case 3:a--;
break}return a}function iu(b){for(var d,c=0,a=bg(b.dk);
c<a;
c++){d=b.dk[c];
if(d.dl==1){d.dl=2}else{d.dl=1}e6(d)}}function iv(){if(this.dl>2){return}var k=this.dU(),l,h=[],d,a,g,f,e,c,b;
for(g=0,f=bg(k);
g<f;
g++){d=k[g];
a=bg(d.dk);
if(a%4==2){l=F;
for(e=1;
e<a;
e++){b=d.dk[e].dl;
c=d.dk[e-1].dl;

if(c+b!=3||c<1||c>2||b<1||b>2){l=T;
break}}if(!l){h.push(d)}}}if(!bg(h)){return}d=h[0];
a=bg(d.dk);
for(g=1,f=bg(h);
g<f;
g++){if(bg(h[g].dk)<a){d=h[g];
a=bg(d.dk)}}return d}function iw(e,d){if(d){var a=3*eo,c=e.cK(d.cZ.c0,T),b=e.cK(d.c1.c0,T);
if(c<a&&c<b){return d.cZ}else{if(b<a){return d.c1}}}return al}function ix(b){var c=this,a;
if(c.ek&&c.ek.type==ar){return}if(gU!=0&&gU==c.dY){a=c.cZ;
c.cZ=c.c1;
c.c1=a}else{if(gU!=0||gT!=1){c.dl=gT;
c.dY=gU}else{if(c.dY!=0){c.dY=0}else{c.dl%=3;
c.dl++}}}c.cZ.ff(bb);
c.c1.ff(bb);
if(!b){e6(c);
e6(c.cZ);
e6(c.c1)}}function iy(){if(!this.ef){return -1}return bP(this.ef.dk,this)}function iz(a){if(!a||!this.dR){return[this.cZ.c0,this.c1.c0]}return[]}function iA(b,a){if(a){if(bO(a.dk,this)){return a}}else{a=new g0(T)}a.fI(this);
this.cZ.g1(b,a);
this.c1.g1(b,a);
return a}function iB(){var b=this,a=b.ef;
if(b.cZ.fG){a=b.cZ.fG.ef}else{if(b.fG){a=b.fG.ef}}return a}function iC(){return bh(this.cZ.c0.z,this.c1.c0.z)}function iD(a){var b=this;
return(b.cZ.bJ(a)?b.c1:b.cZ)}function iE(){return this.c1.c0.cq(this.cZ.c0)}function iF(a){return this.cZ.bJ(a)||this.c1.bJ(a)}function gg(c,b,a,d){var e=this;
e0.apply(e);
e.cZ=c;
e.c1=b;
e.dl=a;
e.dY=d;
e.dx=F;
e.getIndex=iy;
e.ff=io;
e.iG=ix;
e.dW=im;
e.fa=iz;
e.dU=iq;
e.iH=iv;
e.iI=iu;
e.iJ=iF;
e.g_=it;
e.g1=iA;
e.getMolecule=ha;
e.hb=ip;
e.eW=dP;
e.ds=iC;
e.b4=il;
e.gt=iD;
e.iK=iE;
e.cY=cY;
e.ee=e1;
e.c2=iB;
e.dX=cX}function iL(g){g.sort(iM);
for(var b=[],d,c=[],e,f=0,a=bg(g);
f<a;
f++){e=g[f];
d=e.dV;
if(!iN(d)&&!bX(c,d)){b.push(e);
b0(c,d)}}return b}function iN(b){for(var d,c=0,a=bg(b);
c<a;
c++){d=b[c];
if(d.f6&&d.f6.fY){return T}}return F}function iM(e,c){var f=(e.dV?bg(e.dV):0),d=(c.dV?bg(c.dV):0);
if(f<d){return -1}if(f>d){return 1}return 0}function iO(e,c){var d=bg(e.dU()),f=bg(c.dU()),g,h;
if(d<f){return 1}if(d>f){return -1}g=bg(e.dk),h=bg(c.dk);
if(g<h){return 1}if(g>h){return -1}return 0}function iP(c){var e=this.dV,b=[],d,a,f;
if(c){bQ(b,this.dk);
bQ(b,e)}else{for(d=0,a=bg(e);
d<a;
d++){f=e[d];
b.push(f);
b0(b,f.dk);
b1(b,f.ek)}}return b}function iQ(){if(!this.iR){for(var e=this,c=e.dW(),d=e.dV,b=bg(d)-1,a=d[0].c0.cq(c).ch(d[b].c0.cq(c));
b>0;
b--){a.cl(d[b].c0.cq(c).ch(d[b-1].c0.cq(c)))}if(c.eJ(a.cD(c),d[0].c0,d[1].c0)>0){a.eC(-1)}e.iS=(e.iR=a.cs()).b4();
e.iS.cl(c)}}function iT(a){var b=this;
b.iU();
return ac-b.fe.ci(a.c0,b.iS)}function iV(){for(var d=0,e=this.dk,b=bg(e),a,c=e[b-1].dl;
d<b;
d++){a=e[d].dl;
if(a==3||(a==2&&c==2)){return T}c=a}}function iW(){for(var b=0,c=this.dk,a=bg(c);
b<a;
b++){if(c[b].dl!=1){return F}}return T}function iX(){if(!this.fe){var b=new ca(),e=this.dV,d=0,c,a;
for(c=0,a=bg(e);
c<a;
c++){b.cl(e[c].c0);

d++}if(d>1){b.x/=d;
b.y/=d;
b.z/=d}this.fe=b}return this.fe}function iY(e){var c=this,b=[],d=[],h,k,g,f,a;
for(k=0,g=bg(c.dV);
k<g;
k++){h=c.dV[k];
if(!e||!h.dR){b.push(h.c0)}b1(d,h.ek)}for(k=0,g=bg(d);
k<g;
k++){h=d[k];
if(h.ex){for(f=0,a=bg(h.ex);
f<a;
f++){b.push(h.ex[f].dH,h.ex[f].dG)}}if(!e){bR(b,h.fe);
bR(b,h.c5);
bR(b,h.c3)}}if(!e){bR(b,c.fe);
bR(b,c.c5);
bR(b,c.c3)}return b}function iZ(f){if(!(f instanceof i0)){return F}var k=this.dV,a=bg(k),g,e,h,d,c,b;
if(a!=bg(f.dV)){return F}g=bP(f.dV,k[0]);
if(g==-1){return F}e=bP(f.dV,k[1]);
if(e==-1){return F}h=e-g;
if(M.abs(h)==a-1){h=-1}if(M.abs(h)!=1){return F}for(d=2,c=a;
d<c;
d++){b=(c+d*h+g)%c;
if(!k[d].bJ(f.dV[b])){return F}}return T}function i1(d,b){if(!b){b=[]}else{if(bO(b,this)){return}}if(d!=a_){b.push(this);
this.iR=al;
if(d==ba){this.fe=al}if(d!=a8){d=ba}for(var c=0,a=bg(this.dV);
c<a;
c++){this.dV[c].ff(d,b)}for(c=0,a=bg(this.dk);
c<a;
c++){this.dk[c].ff(d,b)}b.pop()}}function i2(){var a=this.dV,b=a.concat(),c;
b.sort(iO);
c=bP(a,b[0]);
bW(a,c);
if(bP(b,a[1])>bP(b,a[bg(b)-1])){a.reverse();
bW(a,-1)}}function i0(a,c){var b=this;
b.bH=bC();
b.dV=a;
b.dk=c;
b.i3=i2;
b.dt=iP;
b.ff=i1;
b.dW=iX;
b.iU=iQ;
b.i4=iT;
b.i5=iV;
b.i6=iW;
b.fa=iY;
b.bJ=iZ}function i7(b){var a=b1(this.dV,b);
if(a){b.h5=this}return a}function i8(a){return b1(this.dk,a)}function i9(){for(var b=[],c=0,a=bg(this.dV);
c<a;
c++){b.push(this.dV[c].c0.b4())}return b}function i_(c){var b=0,a=bg(this.dV);
if(bg(c)!=a){alert("Error")}for(;
b<a;
b++){this.dV[b].c0=c[b].b4()}}function ja(g,e,j){var a=bg(e),c=e[a-1],l,f,k,d,b,h;
if(a<=jb){for(d=0,b=bg(c.dk);
d<b;
d++){l=c.dk[d];
f=(c.bJ(l.cZ)?l.c1:l.cZ);
if(a>=2&&f.bJ(e[a-2])){continue}h=-1;
j[a-1]=l;
if(a>=2){h=bP(e,f)}if(h==-1){e[a]=f;
ja(g,e,j);
e.length=a}else{k=new i0(e.slice(h),j.slice(h));
b1(g,k)}}}j.length=a-1;
return g}function jc(){var c=this;
if(!c.g3){c.g3=[];
for(var c=this,b=0,a=bg(c.dk);
b<a;
b++){c.dk[b].g3=al}if(bg(c.dV)){ja(c.g3,[c.dV[0]],[])}}return c.g3}function jd(){var a=this;
eN.apply(a);
a.dV=[];
a.h6=[];
a.dk=[];
a.ff=je;
a.dU=jc;
a.dt=jf;
a.fa=jg;
a.eC=jh;
a.dT=e_;
a.ji=jj;
a.cs=jk;
a.jl=jm;
a.fE=i7;
a.fI=i8;
a.jn=i9;
a.jo=i_}function jp(t,n,b,h,f,k){if(f){n=f.c0}if(k){b=k.c0}if(!n||!b){return F}var a=es*1.4,u=b.cK(n),o=M.min(M.round(u/a/M.cos(jq*af)),jr),d,g=jq,l=[],j=[],r,q,c,m,p;
if(o<=0){return F}d=n.cF(b);
if(k){if(o>1){g=M.acos(bA(u/o/a,-0.9,0.9))/af}}gf.fR();
if(o==1){if(f&&(c=f.g5(k))){if(!h){c=gf.fI(c)}c.iG();
gf.eW();
return T}else{d+=g}}else{if(o%2){d+=g/(o-1)}}l[0]=M.cos((d-g)*af);
l[1]=M.cos((d+g)*af);
j[0]=M.sin((d-g)*af);
j[1]=M.sin((d+g)*af);
if(k){o--}if(h){m=st.gj();
if(!t.ctrlKey){m.js()}if(f){r=f;
h=f.ef}else{r=new gd(n.b4());
h.fE(r);
m.fE(r)}}else{if(f){r=gf.fE(f)}else{r=gf.fE(new gd(n.b4()))}aV.jt.push(aV.text(b.x,b.y+30/hM,o+(f?0:1)).attr(aw,2+20/hM))
}if(!f){r.ga(gQ(),T)}for(p=0;
p<o;
p++){q=r.b4();
if(p==0){q.ga(gQ(),T)}q.c0.x+=a*l[p%2];
q.c0.y+=a*j[p%2];
if(!h){q=gf.fE(q)}c=new gg(r,q,1,0);
if(h){h.fE(q);
h.fI(c);
m.fI(c);
m.fE(q)}else{c=gf.fI(c)}r=q}if(k){if(h){c=h.fJ.ju(r,k,1,0);
m.fI(c)}else{q=gf.fE(k);
c=gf.fI(new gg(r,q,1,0))}}gf.eW();
return T}function jv(d){if(!d){d=new b5()}var e=this,b=new fp(),c,a;
bK(d,e,b);
b.jw=2;
for(c=0,a=bg(e.h6);
c<a;
c++){b.hy(d.b3(e.h6[c]),T)}for(c=0,a=bg(e.dk);
c<a;
c++){b.fI(d.b3(e.dk[c]),T)}for(c=0,a=bg(e.dV);
c<a;
c++){b.fE(d.b3(e.dV[c]),T)}b.eh=d.b3(e.eh);
b.jw=1;
b.ir();
return b}function je(e,b){if(!b){b=[]}else{if(bO(b,this)){return}}var d=this,c,a;
b.push(d);
if(e>a9){d.fe=al;
d.fl=al}if(e>a8&&e<bb){d.c5=al;
d.c3=al}if(e!=a_){if(e!=a8){e=ba}for(c=0,a=bg(d.dV);
c<a;
c++){d.dV[c].ff(e,b)}for(c=0,a=bg(d.dk);
c<a;
c++){d.dk[c].ff(e,b)}if(d.h6){for(c=0,a=bg(d.h6);
c<a;
c++){d.h6[c].ff(e,b)}}if(d.jx){for(c=0,a=bg(d.jx);
c<a;
c++){d.jx[c].ff(e,b)}}if(d.g3){for(c=0,a=bg(d.g3);
c<a;
c++){d.g3[c].ff(e,b)}}}if(d.fJ){d.fJ.ff(e,b)}else{if(d.ef){d.ef.ff(e,b)}}b.pop()}function jy(f){if(!bg(this.dV)){return}this.dT();
if(f.x>this.c5.x&&f.x<this.c3.x){var e=this,c=new jz(e),d,a,b;
if(!e.jx){e.ir()}if(bg(e.dV)<2){return}for(d=0,a=bg(e.jx);
d<a;
d++){b=e.jx[d];
b.dT();
if(0.5*(b.c5.x+b.c3.x)>f.x){c.jA.push(b)}else{c.jB.push(b)}}return c}}function jh(d,b){if(b){b=this.dW()}for(var e=this.fa(),c=0,a=bg(e);
c<a;
c++){e[c].eC(d,b)}}function jk(){if(bg(this.dV)>1){var h=this,e=0,g=0,d,a,c,f,b;
if(a=bg(h.dk)){for(d=0;
d<a;
d++){f=h.dk[d];
e+=f.cZ.c0.cK(f.c1.c0);
g++}}else{for(d=0,a=bg(h.dV);
d<a;
d++){b=h.dV[d];
for(c=0;
c<d;
c++){e+=b.c0.cK(h.dV[c].c0);
g++}}}if(e>0){h.eC(c4*g/e)}}this.dT()}function jC(c,d){var b=c-this.c5.x,a=bx(d)-0.5*(this.c5.y+this.c3.y);
this.cl(b,a)}function jD(d,b){var e=this,c,a;
if(e.bJ(d)){return}for(c=0,a=bg(d.dV);
c<a;
c++){e.fE(d.dV[c])}for(c=0,a=bg(d.dk);
c<a;
c++){e.fI(d.dk[c])}for(c=0,a=bg(d.h6);
c<a;
c++){e.hy(d.h6[c])}if(e.g3&&d.g3){bQ(e.g3,d.g3)}else{e.jE()}e.ir();
if(b||eg=="tmpl"){e.eh=d.eh}e.ff(ba)}function jF(c,b){var d=this,a;
if(b1(d.dV,c)){c.ef=d;
c.dS=al;
c.e7=al;
if(!b){e6(c);
a=d.jG();
a.ff(a_);
if(a.fG){a.fG.ff(a_)}}return T}return F}function jH(h,c,g,m){var u=this,l,p,n,o,t,d,f,e=[],k=[],a=[],q=[],b,r=bg(m);
if(r<=1){l=new ig();
if(r){l.hh(m[0].cZ.dx?m[0].cZ:m[0].c1)}}else{if((n=be(h))<h1&&n>1){l=new ii();
u.fn(m[0],T);
u.fn(m[1],T);
bQ(e,c);
bQ(k,g);
bT(k,m);
ht(m,0,e,a);
ht(m,1,e,a);
for(p=0;
p<n;
p++){if(p>0){b=new b5();
q[p]=b}for(o=0,t=bg(k);
o<t;
o++){d=k[o];
if(p==0){l.fI(d);
b1(e,d.cZ);
b1(e,d.c1)}else{f=b.b3(d);
l.fI(f);
u.fI(f,T)}}for(o=0,t=bg(e);
o<t;
o++){d=e[o];
if(p==0){l.fE(d);
l.hh(d)}else{f=b.b3(d);
l.fE(f);
u.fE(f,T)}}}for(p=0;
p<=n;
p++){if(p==0){f=new gg(a[1],a[0],m[0].dl,m[0].dY);
m[0]=f}else{if(p==n){f=new gg(q[p-1].b3(a[2]),a[3],m[1].dl,m[1].dY);

m[1]=f}else{if(p==1){f=new gg(a[2],q[p].b3(a[0]),m[1].dl,0)}else{f=new gg(q[p-1].b3(a[2]),q[p].b3(a[0]),m[1].dl,0)}}}l.fI(f);
u.fI(f,T)}}else{l=new ik();
if(n){l.hk=""}else{l.hk="HT"}}}l.hi(m);
if(l.type!=ar){for(o=0,t=bg(g);
o<t;
o++){l.fI(g[o])}for(o=0,t=bg(c);
o<t;
o++){l.fE(c[o])}}l.di=h;
l.hj=n;
l.ic();
u.hy(l);
l.hW(T);
return l}function jI(c,b){if(b1(this.h6,c)){c.ef=this;
var a;
if(c.dV[0]&&(a=c.dV[0].h5)){c.h5=a;
b1(a.h6,c)}c.dS=al;
c.e7=al;
if(!b){e6(c)}return T}return F}function jJ(d,c){if(d.bJ(c)){return}e6(c);
this.ff(bb);
if(bO(this.dV,c)){e2(d,this.dV)}else{bU(this.dV,d,c);
e2(d)}var f=this,a,e,b;
for(a=bg(d.dk)-1;
a>=0;
a--){e=d.dk[a];
e6(e);
if(e.cZ.bJ(d)){e.cZ=c;
e6(e.c1)}else{if(e.c1.bJ(d)){e.c1=c;
e6(e.cZ)}}b1(c.dk,e)}c.ff(bb);
if(!d.dI){b=st.gj();
bU(b.dV,d,c);
c.dx=d.dx}if(d.bJ(f.eh)){f.eh=c}f.jE();
f.ir();
if(d.bJ(ej)||c.bJ(ej)){hZ()}}function jK(d,h){var g=this,b,f,c=st.gj(),e,a=d.h5;
g.ff(ba);
e2(d,g.dV);
for(b=bg(d.dk)-1;
b>=0;
b--){f=d.dk[b];
if(f){g.fn(f,h)}}g.jL(d);
bV(d,c.dV);
if(d.bJ(g.eh)){g.eh=al}if(g){if(a){bV(d,a.dV);
if(!bg(a.dV)){e2(a,g.jx)}}if(!bg(g.dV)&&(e=g.fJ)){e.jM(g)}}if(d.bJ(ej)){ej=al;
hZ()}}function jN(d){var e=this;
e.ff(ba);
d.dm();
e2(d,e.h6);
var a,c,b=st.gj();
for(a=bg(d.dk)-1;
a>=0;
a--){c=d.dk[a];
if(c){e.fn(c)}}for(a=bg(d.dV)-1;
a>=0;
a--){c=d.dV[a];
if(c){e.fo(c)}}e.jL(d);
bV(d,b.h6);
if(d.bJ(hX)){hX=al;
hZ()}}function jO(e,d){var f=this,b=e.cZ,a=e.c1,c;
if(!b||!a){return F}if(b1(f.dk,e)){e.ef=f;
e.dS=al;
e.e7=al;
b1(e.cZ.dk,e);
b1(e.c1.dk,e);
if(f.jw==1){c=e.cZ.h5;
if(!c){if(!e.c1.h5){f.ir()}else{c=e.c1.h5;
e.h5=c;
e.cZ.h5=c;
b1(c.dk,e);
b1(c.dV,e.cZ)}}else{if(!e.c1.h5){e.h5=c;
e.c1.h5=c;
b1(c.dk,e);
b1(c.dV,e.c1)}else{if(!c.bJ(e.c1.h5)){f.ir()}else{f.jE();
b1(c.dk,e)}}}}e.cZ.ff(bb);
e.c1.ff(bb);
if(!d){e5(e.cZ.dk);
e5(e.c1.dk);
e6(e.cZ);
e6(e.c1)}return T}return F}function jP(c,b){if(bO(this.dk,b)){e2(c,this.dk)}else{bU(this.dk,c,b);
e2(c)}if(bO(c.cZ.dk,b)){bV(c,c.cZ.dk)}else{bU(c.cZ.dk,c,b)}if(bO(c.c1.dk,b)){bV(c,c.c1.dk)}else{bU(c.c1.dk,c,b)}e6(b);
c.cZ.ff(bb);
c.c1.ff(bb);
e6(c.cZ);
e6(c.c1);
e5(c.cZ.dk);
e5(c.c1.dk);
this.ff(bb);
var a=st.gj();
bU(a.dk,c,b);
b.dx=c.dx;
this.jE();
this.ir()}function jQ(){for(var c=this,b=0,a=bg(c.dk);
b<a;
b++){c.dk[b].g3=al}for(b=0,a=bg(c.dV);
b<a;
b++){c.dV[b].g3=al}if(c.jx){for(b=0,a=bg(c.jx);
b<a;
b++){c.jx[b].g3=al}}c.g3=al}function jR(f,h){var g=this,d=st.gj(),c,a,e,b=f.cZ.h5;
if(!b){b=f.c1.h5}e2(f,g.dk);
bV(f,f.cZ.dk);
bV(f,f.c1.dk);
f.cZ.ff(bb);
f.c1.ff(bb);
e6(f.cZ);
e6(f.c1);
e5(f.cZ.dk);
e5(f.c1.dk);
g.ff(ba);
if(h){if(b){bV(f,b.dk)}}else{g.ir();

g.jE()}g.jL(f);
d.fn(f);
for(c=0,a=bg(g.h6);
c<a;
c++){e=g.h6[c];
if(bO(e.hf,f)){if(e.type!=aq){bV(f,e.hf)}else{e.h2()}}}}function jS(e,b){e.h5=b;
b.dV.push(e);
if(b1(b.h6,e.ek)){e.ek.h5=b}var c,a,d;
for(c=0,a=bg(e.dk);
c<a;
c++){d=e.dk[c];
b1(b.dk,d);
if(!d.cZ.h5){jS(d.cZ,b)}else{if(!d.c1.h5){jS(d.c1,b)}}}}function jT(d){if(d||gf.fS()){var e=this;
e.jx=[];
for(var b,c=0,a=bg(e.dV);
c<a;
c++){e.dV[c].h5=al}for(c=0,a=bg(e.dV);
c<a;
c++){if(!e.dV[c].h5){b=new jd();
e.jx.push(b);
b.ef=e;
jS(e.dV[c],b)}}}}function eq(b,a,c){if(c){return b.c0.cF(a.c0,c.c0)}else{return b.c0.cF(a.c0)}}function jU(b,a,c){if(c){return b.c0.ci(a.c0,c.c0)}else{return b.c0.ci(a.c0)}}function ge(l,q,n,m){var o,b=es*1.4,c,d,r,p=[],h,g,f,a=3*jV,k=l.c0;
if(n){n.z=k.z}if(n&&m&&m.ctrlKey){if(m.shiftKey){return n}o=k.cF(n);
c=cT(k,o,b)}else{if(n&&m&&m.shiftKey){b=k.cK(n)}if((f=bg(l.dk))>1&&f<4&&q==1){for(h=0;
h<f;
h++){r=l.dk[h].gt(l);
for(g=h+1;
g<f;
g++){if(M.abs(ai-k.ci(r.c0,l.dk[g].gt(l).c0))>5){h=f+1;
break}}}if(h==f){h=l.dk[0].gt(l).c0;
g=l.dk[1].gt(l).c0;
c=k.eG(h,g,b,0.5*ai);
r=k.eG(h,g,b,-0.5*ai);
if(n){h=n.cK(c);
g=n.cK(r)}else{f=l.ef;
h=f.ji(c);
g=f.ji(r)}if(g<h||(g==h&&k.eH(r)>k.eH(c))){c=r}}}if(!c){o=l.gh(q,n);
do{c=cT(k,o,b);
d=l.ef.fJ.jW(c,a,a);
if(!d||!bg(d)){break}for(h=0;
h<bg(d);
h++){p.push(new gn(l,d[h]))}o=l.gw(n,p)}while(bg(p)<10);
if(f>2||!l.g6()){a=0;
for(h=f-1;
h>=0;
h--){d=l.dk[h].gt(l);
a+=(d.c0.z-k.z)/(M.abs(o-eq(l,d))+1)}c=cS(k,o,(a>0?-30:30),b)}}}return c}function jX(c,a,b){if(bx(b)!=0){return ap+c+br("1",3)+S+br(a+1,3)+S+br(M.round(b),3)}else{return""}}function jY(){var c=this,f,e,d,b,k,g,h=[],a=ab+"\n"+Number(new Date())+"\n"+navigator.userAgent+"\n"+br(bg(c.dV),3)+br(bg(c.dk),3);
if(eg=="rxn"){a+="  0  0  0  0  0  0  0  0  0 V2000"}else{a+="  0  0  0  0  0  0  0  0999 V2000"}for(f=0,e=bg(c.dV);
f<e;
f++){a+=c.dV[f].hb()}for(f=0,e=bg(c.dk);
f<e;
f++){a+=c.dk[f].hb()}for(f=0,e=bg(c.dV);
f<e;
f++){a+=jX("CHG",f,c.dV[f].ed());
a+=jX("RAD",f,c.dV[f].dg);
a+=jX("ISO",f,c.dV[f].dh)}if(eg=="tmpl"&&c.eh){a+=ap+"ATT"+br("1",3)+S+br(c.eh.getIndex(),3)+S+aZ.val()+S+a0.val()}for(f=0,e=bg(c.h6);
f<e;
f++){k=c.h6[f];
if(!(b=bg(k.dV))){continue}a+=ap+"STY"+br("1",3)+S+br(f+1,3)+S+k.type;
if(k.type==as){a+=ap+"SCN"+br("1",3)+S+br(f+1,3)+S+k.hk}for(d=0;
d<b;
d++){a+=(d%15?"":ap+"SAL "+br(f+1,3)+br(M.min(b-d,15),3))+br((k.dV[d].getIndex()+1),4)}if(k.type==ar){for(d=0,b=bg(k.hg);
d<b;
d++){a+=(d%15?"":ap+"SPA "+br(f+1,3)+br(M.min(b-d,15),3))+br((k.hg[d].getIndex()+1),4)}}if(k.ex){for(d=0,b=bg(k.ex);
d<b;
d++){g=k.ex[d];
a+=ap+"SDI "+br(f+1,3)+br(4,3)+f2(g.dH.x)+f2(-g.dH.y)+f2(g.dG.x)+f2(-g.dG.y)}}for(d=0,b=bg(k.hf);
d<b;
d++){a+=(d%15?"":ap+"SBL "+br(f+1,3)+br(M.min(b-d,15),3))+br((k.hf[d].getIndex()+1),4)}a+=ap+"SMT "+br(f+1,3)+S+by(k.di);
if(k.ev){h.push(k)}}for(d=0,b=bg(h);
d<b;
d++){a+=(d%15?"":ap+"SDS EXP"+br(M.min(b-d,15),3)+S)+br(h[d].getIndex()+1,3)}for(f=0,e=bg(c.jZ);
f<e;
f++){a+="\n"+c.jZ[f]}a+=ap+"END\n";
return a}function j0(t){var h=new fp(),a=t.split("\n"),p=0,m=bg(a),o,u,n,y,q={},c,d,b,x,w,f,g,l,v;

h.jw=0;
do{if(p<m){p++}else{return al}}while(a[p]!=al&&!bo(a[p],"V2000"));
c=bl(a[p],[3,3]);
for(o=0,u=be(c[0]);
o<u;
o++){p++;
d=bl(a[p],[10,10,10,1,3,2,3,3,3,3,3,3,3,3,3,3]);
b=new gd(new ca(parseFloat(d[0]),-parseFloat(d[1]),parseFloat(d[2])));
l=be(d[6]);
if(l!=0){b.f5=4-l}b.gl(d[4]);
b.dj=be(d[8])-1;
if(b.dj<0){b.dj=al}b.f8=be(d[10]);
if(b.f8>=15){b.f8=0}else{if(b.f8==0){b.f8=al}}if(d[5]!="0"&&b.f6){b.dh=M.round(b.f6.m)+be(d[5])}h.fE(b)}for(o=0,u=be(c[1]);
o<u;
o++){p++;
d=bl(a[p],[3,3,3,3,3,3,3]);
x=h.dV[be(d[0])-1];
w=h.dV[be(d[1])-1];
if(!x||!w||x.bJ(w)){continue}l=be(d[2]);
if(a7[l]!=al){l=a7[l]}f=new gg(x,w,l,be(d[3]));
h.fI(f)}while(p<m){p++;
d=bm(a[p]);
switch(d[1]){case"CHG":u=bx(be(d[2]));
try{for(o=0;
o<u;
o++){l=be(d[2*o+4]);
if(!isNaN(l)){b=h.dV[be(d[2*o+3])-1];
b.f5=l}}}catch(r){}break;
case"ISO":u=bx(be(d[2]));
try{for(o=0;
o<u;
o++){l=be(d[2*o+4]);
if(!isNaN(l)){b=h.dV[be(d[2*o+3])-1];
b.dh=l}}}catch(r){}break;
case"RAD":u=bx(be(d[2]));
try{for(o=0;
o<u;
o++){l=be(d[2*o+4]);
if(!isNaN(l)){b=h.dV[be(d[2*o+3])-1];
b.dg=l}}}catch(r){}break;
case"ATT":try{h.eh=h.dV[be(d[3])];
h.aZ=by(d[4]).split(",");
h.a0=by(d[5])}catch(r){}break;
case"STY":u=3+2*bx(be(d[2]));
try{for(o=3;
o<u;
o+=2){l=d[o+1].toUpperCase();
v=be(d[o]);
if(l=="GEN"){l=as}if(l==aq){g=new ig()}else{if(l==ar){g=new ii()}else{if(l==as){g=new ik()}else{continue}}}h.hy(g);
q[v]=g}}catch(r){}break;
case"SCN":u=3+2*bx(be(d[2]));
try{for(o=3;
o<u;
o+=2){v=be(d[o]);
g=q[v];
if(g.type==as){g.hk=d[o+1].toUpperCase()}}}catch(r){}break;
case"SDI":v=be(d[2]);
try{g=q[v];
if(g&&g.ij){g.ij(d.slice(4))}}catch(r){}break;
case"SAL":v=be(d[2]);
try{g=q[v];
if(g){for(o=4,u=bg(d);
o<u;
o++){g.fE(h.dV[be(d[o])-1])}}}catch(r){}break;
case"SPA":v=be(d[2]);
try{g=q[v];
if(g){for(o=4,u=bg(d);
o<u;
o++){g.hh(h.dV[be(d[o])-1])}}}catch(r){}break;
case"SBL":v=be(d[2]);
try{g=q[v];
if(g){for(o=4,u=bg(d);
o<u;
o++){f=h.dk[be(d[o])-1];
g.hi(f)}}}catch(r){}break;
case"SDS":l=a[p].substr(13);
try{for(o=0,u=bg(l);
o<u;
o+=3){v=be(bk(l.substr(o,3)));
g=q[v];
if(g){g.hW(F)}}}catch(r){}break;
case"SMT":v=be(d[2]);
try{g=q[v];
if(g){g.di=d[3].replace(/^[\s\^]+|[\s\^]+$/g,"");
g.hj=be(d[3]);
if(g.hj){g.hk=""}}}catch(r){}break;
case"END":p=m;
break;
default:h.jZ.push(a[p])}}for(p=0,m=bg(h.dV);
p<m;
p++){b=h.dV[p];
b.gI();
if(b.f5==b.gC){b.f5=al}}for(p=0,m=bg(h.h6);
p<m;
p++){g=h.h6[p];
for(o=0,u=bg(g.dV);
o<u;
o++){b=g.dV[o];
for(n=0,y=bg(b.dk);
n<y;
n++){g.fI(b.dk[n])}}if(g.type==aq&&!bg(g.hf)){b0(g.hg,g.dV)}if(g.type!=ar){for(o=0,u=bg(g.hg);
o<u;
o++){b=g.hg[o];
for(n=0,y=bg(b.dk);
n<y;
n++){f=b.dk[n];
if(!bO(g.dV,(f.cZ.bJ(b)?f.c1:f.cZ))){bV(f,g.dk)}}}}if(g.ev==al){g.hW(T)}}h.jw=1;
h.ir();
return h}function j1(){if(!this.g3){if(!this.jx){this.ir()}this.g3=[];
for(var b=0,a=bg(this.jx);
b<a;
b++){bQ(this.g3,this.jx[b].dU())}}return this.g3}function j2(){var a=this;
if(a.d2){return a.d2}if(a.fJ){return a.fJ.cY()}}function jf(b){var c=this,a;
if(!c.fl){a=[];
bQ(a,c.dk);
bQ(a,c.dV);
bQ(a,c.h6);
c.fl=a}return c.fl}function jj(e){for(var c=0,d,a=this.dV,b=bg(a)-1;
b>=0;
b--){d=j3-a[b].c0.cK(e);
if(d>0){c+=j4*d*d}}return c}function j5(){var d=this,c,b,a,e;

if(!d.c5||!d.c3){e_.apply(d);
for(b=0,a=bg(d.h6);
b<a;
b++){c=d.h6[b];
if(c.type==aq){e=0.4*j6*bg(c.di);
fc(d,c.fe.y-e);
fc(d,c.fe.y+e)}}}}function jg(e){var h=this,b=[],g,d,a,c,f;
for(d=0,a=bg(h.dV);
d<a;
d++){g=h.dV[d];
if(!e||!g.dR){b.push(g.c0)}}if(!e){if(h.jx){for(d=0,a=bg(h.jx);
d<a;
d++){bR(b,h.jx[d].fe)}}if(h.g3){for(d=0,a=bg(h.g3);
d<a;
d++){bR(b,h.g3[d].fe)}}}for(d=0,a=bg(h.h6);
d<a;
d++){g=h.h6[d];
if(g.ex){for(c=0,f=bg(g.ex);
c<f;
c++){b.push(g.ex[c].dH,g.ex[c].dG)}}if(!e){bR(b,g.fe);
bR(b,g.c5);
bR(b,g.c3)}else{if(g.type==aq){bR(b,g.dW())}}}if(!e){bR(b,h.fe);
bR(b,h.c5);
bR(b,h.c3)}return b}function j7(b,a){this.go=b;
this.j8=a}function j9(){for(var b=[],e,d,f,c=0,a=bg(this.dV);
c<a;
c++){e=this.dV[c];
if((d=e.f6)&&d.fZ){f=d.fZ+e.ed()-e.gx();
if(f>0){b.push(new j7(e,f))}}}return b}function j_(){if(!this.fJ){return -1}return bP(this.fJ.fN,this)}function ha(){return this.ef}function ka(){return(this.fJ?this.fJ:this)}function jz(a){this.ef=a;
this.jB=[];
this.jA=[]}function fp(){var a=this;
eN.apply(a);
a.dV=[];
a.h6=[];
a.dk=[];
a.jZ=[];
a.jw=1;
a.ir=jT;
a.dU=j1;
a.ff=je;
a.jE=jQ;
a.jY=jY;
a.kb=j9;
a.eC=jh;
a.dT=j5;
a.ji=jj;
a.cs=jk;
a.jC=jC;
a.fE=jF;
a.hy=jI;
a.hx=jH;
a.gk=jJ;
a.fo=jK;
a.hL=jN;
a.fI=jO;
a.kc=jP;
a.fn=jR;
a.fs=jD;
a.kd=jy;
a.jl=ke;
a.dt=jf;
a.jL=fk;
a.fa=jg;
a.getIndex=j_;
a.b4=jv;
a.jG=ka;
a.ee=e1;
a.cY=j2}function kf(d){if(!d){d=new b5()}var e=this,b=new fr(e.d2),c,a;
bK(d,e,b);
for(c=0,a=bg(e.fN);
c<a;
c++){b.fs(e.fN[c].b4(d))}for(c=0,a=bg(e.kg);
c<a;
c++){b.kh(e.kg[c].b4(d),T)}b.ki=e.ki;
if(e.fw){b.fw=e.fw.b4(d);
b.fw.fJ=b}b.kj=e.kj.b4(d);
return b}function kk(b){if(!b){b=new b5()}var c=this,a=new kl(c.c0.x,c.c0.y);
bK(b,c,a);
a.dx=c.dx;
return a}function km(b){if(!b){b=new b5()}var c=this,a=new fA(c.dH.b4(),c.dG.b4());
bK(b,c,a);
a.dx=c.dx;
a.fJ=b.b3(c.fJ);
return a}function kn(){return cr(this.dH,this.dG)}function ko(a){a.dm();
return bV(a,this.fN)}function kp(a,c,b){var d=this;
if(eg=="rxn"||!bg(d.fN)){if(b1(d.fN,a)){a.fJ=d;
if(c){d.kq()}}}else{d.fN[0].fs(a,b)}}function kr(){this.ks();
this.kt();
this.ku()}function kv(){if(eg!="rxn"){return}var c=this,f,e,g,a=c.fN,b,d,h,k,j;
for(f=bg(a)-1;
f>=0;
f--){b=a[f];
if(!bg(b.dV)){this.jM(b)}}a.sort(kw);
if(c.fw){g=c.fw.dW()}for(f=0,e=bg(a)-1;
f<e;
f++){b=a[f];

k=a[f+1];
d=b.dW();
j=k.dW();
if(g&&g.x>d.x&&g.x<j.x){c.ki=f+1}else{h=c.kx(d);
if(!h||h.c0.x>=j.x){b.dT();
k.dT();
c.ky(0.5*(b.c3.x+k.c5.x),0.5*(j.y+d.y))}}}}function kz(l,k,d){if(l&&k){if(d){var c=this,b=l.dW(),j=k.dW(),e=M.min(b.x,j.x),a=M.max(b.x,j.x),g,f,h;
for(g=bg(c.kg)-1;
g>=0;
g--){f=c.kg[g].c0;
if(e<f.x&&f.x<a){c.kA(c.kg[g])}}if(c.fw){h=c.fw.dW();
if(e<h.x&&h.x<a){c.kB()}}}l.fs(k);
bV(k,this.fN);
this.kt()}}function kC(){var a=this,j=a.kg.concat(),e,g,c,f,b={},d={},h;
if(a.fw){j.push(a.fw)}j.sort(kD);
for(e=bg(j)-1;
e>=0;
e--){g=j[e];
f=g.dW();
h=this.kE(f);
if(!(h=this.kE(f))&&g instanceof kl){a.kA(g,T)}else{b[g.bH]=h;
if(!(h=this.kF(f))&&g instanceof kl){a.kA(g,T)}d[g.bH]=h}}for(e=bg(j)-2;
e>=0;
e--){g=j[e];
c=j[e+1];
h=b[g.bH];
if(h&&h.bJ(b[c.bH])&&d[g.bH]&&d[g.bH].bJ(d[c.bH])){if(c instanceof kl){a.kA(c,T)}else{a.kA(g,T)}}}}function kG(f,j,g){for(var a,h=an,b,c,e=0,d=bg(this.fN);
e<d;
e++){b=this.fN[e].dW();
if((b.x-f.x)*j>0||(b.y-f.y)*g>0){c=f.cK(b,T);
if(c<h){a=this.fN[e];
h=c}}}return a}function kH(a){return this.kI(a,-1,0)}function kJ(a){return this.kI(a,1,0)}function kK(f,j,g){for(var a,h=an,b,c,e=0,d=bg(this.kg);
e<d;
e++){b=this.kg[e].c0;
if((b.x-f.x)*j>0||(b.y-f.y)*g>0){c=f.cK(b,T);
if(c<h){a=this.kg[e];
h=c}}}return a}function kL(a){return this.kM(a,-1,0)}function kN(a){return this.kM(a,1,0)}function kO(c){var k=c.ef,l=new fp(),b,h,m,g,f,e,a,d=st.gj();
this.fN.splice(bP(this.fN,k)+1,0,l);
l.fJ=this;
l.jx=[];
this.kt();
for(g=0,f=bg(c.jA);
g<f;
g++){b=c.jA[g];
for(e=0,a=bg(b.dV);
e<a;
e++){h=b.dV[e];
bV(h,k.dV);
if(!bO(l.dV,h)){l.fE(h)}}for(e=0,a=bg(b.dk);
e<a;
e++){m=b.dk[e];
bV(m,k.dk);
if(!bO(l.dk,m)){l.fI(m)}}bV(b,k.jx);
b1(l.jx,b);
delete k.g3;
k.ff(ba);
d.ff(bb)}}function kP(e,b){var c=this,d,a;
if(!b){d=c.kE(e.c0),a=c.kF(e.c0);
c.gi(d,a,F)}e.dm();
e2(e,c.kg);
c.jL(e);
if(!b){c.kt()}}function kQ(c,a){if(eg!="rxn"){return}var b=this;
b.kg.push(c);
c.fJ=b;
if(!a){e6(c);
b.ff(a_)}return T}function kR(b,a,d){var c;
if(b instanceof ca){c=new kl(b.x,b.y)}else{c=new kl(b,a)}this.kh(c,d);
if(!d){this.kS(c.c0)}return c}function dB(b,a,d,c){if(!c){c=this.data(ao)}kT=c;
switch(gP){case aK:case aL:case aG:case aH:c.da.attr("cursor","move");
break;
case aP:if(gR){c.fJ.kA(c);
kT=al;
kU=T}break}}function dC(b,a,d,c){kT=al}function dK(c,a,d,b){if(!b){b=this.data(ao)}kV=b;
switch(gP){case aK:case aL:case aG:case aH:b.da.attr("cursor","move");
break;
case aP:if(gR){b.fJ.kB(b);
kV=al}break}}function dL(c,a,d,b){kV=al}function kW(h){for(var f=this,e,b,g=an,d,c=0,a=bg(f.fN);
c<a;
c++){b=f.fN[c].kd(h);
if(b){d=h.cK(f.fN[c].dW(),T);
if(d<g){e=b;
g=d}}}if(e){f.kX(e)}f.kt()}function kY(b){var c=this,a=c.fw;
if(!a){return F}if(b){c.ky(cr(a.dH,a.dG))}c.jL(a);
a.dm();
delete c.fw}function kZ(b,a,c){if(eg!="rxn"){return
}if(!(b instanceof ca)){b=new ca(b,0)}if(!a){a=b.b4();
a.x+=k0}this.fB(new fA(b,a));
if(!c){this.kS(cr(b,a))}}function k1(a){if(eg!="rxn"){return}var b=this;
if(b.fw){b.kB(T)}b.fw=a;
b.fw.fJ=this;
b.ff(a_)}function k2(d,c,b,e){if(b==al){b=gT}if(e==al){e=gU}var a=d.ef,f;
if(!this.bJ(a.fJ)){return}if(!a.bJ(c.ef)){this.gi(a,c.ef,T)}f=new gg(d,c,b,e);
a.fI(f);
return f}function k3(m,g){var e=m.k4,a=m.k5,h=e.ef,b=m.k6,d,c,f,k,j,l,i;
if(!this.bJ(h.fJ)){return}d=(m.eI?a.c1:a.cZ);
c=(m.eI?a.cZ:a.c1);
if(e.dl!=2||a.dl!=2){k=e.iH();
if(k||e.dl!=a.dl){j=a.iH();
if(e.dl!=2&&k){e.iI(k)}if(a.dl!=2&&j){a.iI(j)}}}if(!e.cZ.h5.bJ(a.cZ.h5)){b.eD((eq(e.cZ,e.c1)-eq(d,c))*af,a.dW());
b.cl(e.cZ.c0.cq(d.c0));
l=e.cZ.c0.cK(e.c1.c0);
i=d.c0.cK(c.c0);
if(l>0&&i>0&&l!=i){b.eC(l/i,e.cZ.c0)}}if(!h.bJ(a.ef)){if(b){bV(a.ef,b.fN)}this.gi(h,a.ef,T)}f=(g[e.cZ]||g[e.c1]||g[d]||g[c]);
if(f==2||(!f&&e.g_()+e.cZ.g_()+e.c1.g_()>a.g_()+d.g_()+c.g_())){h.gk(d,e.cZ);
g[e.cZ]=2;
h.gk(c,e.c1);
g[e.c1]=2;
h.kc(a,e)}else{h.gk(e.cZ,d);
g[d]=1;
h.gk(e.c1,c);
g[c]=1;
h.kc(e,a)}if(b){b.fn(a);
b.fo(d);
b.fo(c)}}function k7(d,a,h){var i=d.k4,e=d.k5,j=i.ef,f=d.k6,c,l;
if(!this.bJ(j.fJ)){return}if(a){if(!i.h5){j.ir()}if(!i.h5.bJ(e.h5)){f.cl(i.c0.cq(e.c0));
var b=i.gG(i.f4()),g=i.gx(),m=e.gG(e.f4()),k=e.gx();
if(b<k&&m<g&&(g>1||k>1)){c=new gd(ge(i,1));
l=new gg(i,c,1,0);
j.fE(c);
j.fI(l);
h=1;
i=c;
f.cl(c.c0.cq(e.c0))}else{if(m<g){h=2}else{if(b<k){h=1}}}}}if(!j.bJ(e.ef)){if(f){bV(e.ef,f.fN)}this.gi(j,e.ef,T)}if(h==2||(!h&&i.g_()>e.g_())){j.gk(e,i)}else{j.gk(i,e)}if(f){f.fo(e)}}function kw(d,c){d.dT();
c.dT();
if(d.c5.x<c.c5.x){return -1}if(d.c5.x>c.c5.x){return 1}if(d.c5.y<c.c5.y){return -1}if(d.c5.y>c.c5.y){return 1}return 0}function kD(d,c){var e=d.dW(),f=c.dW();
if(e.x<f.x){return -1}if(e.x>f.x){return 1}if(e.y<f.y){return -1}if(e.y>f.y){return 1}return 0}function k8(){if(eg!="rxn"){return}this.ki=0;
var d=this,c,b,a;
if(d.fw){c=d.fw.dW()}for(b=0,a=bg(d.fN);
b<a;
b++){if(c&&d.fN[b].dW().x>=c.x){break}d.ki++}}function k9(){if(!this.fN||bg(this.fN)==0){return""}if(eg=="rxn"){for(var d=this,a,b,c=bg(d.fN)-1;
c>=0;
c--){if(!bg(d.fN[c].dV)){d.fN.splice(c,1)}}d.fN.sort(kw);
d.kt();
b="$RXN\n\n"+ab+S+Number(new Date())+"\n\n"+br(d.ki,3)+br(bg(d.fN)-d.ki,3)+"\n";
for(c=0,a=bg(d.fN);
c<a;
c++){b+="$MOL\n";
b+=d.fN[c].jY()}return b}else{return this.fN[0].jY()}}function k_(a){this.la(a);
this.eW()}function lb(m){m=bp(m);
if(bn(m,"$RXN")){var c=this,k=m.split("$MOL\n"),h=k.shift(),g,f,o,d,a,l,n,j,b=0,e=0;
for(g=0,f=bg(k);
g<f;
g++){k[g]=unescape(k[g])}o=h.split("\n");
d=unescape(o[bg(o)-2]);
c.ki=be(d.substr(0,3));
a=be(d.substr(3,3));
l=be(d.substr(6,3));
if(l>0){n=k.splice(c.ki+a);
k.splice(c.ki,0,n);
c.ki+=l}for(g=0,f=bg(k);
g<f;
g++){j=j0(k[g]);

if(!bg(j.dV)){if(e<c.ki){c.ki--}continue}if(e==c.ki){c.lc(b,al,T);
b+=k0+d3}else{if(e>0){c.ky(b,0,T);
b+=dw+d3}}j.cs();
j.jC(b);
c.fs(j);
b+=(j.c3.x-j.c5.x)+d3;
e++}if(g==c.ki){c.lc(b)}}else{this.ki=1;
j=j0(m);
j.cs();
this.fs(j);
if(eg=="tmpl"&&this.d2==aV){if($.isArray(j.aZ)){aZ.val(j.aZ.join(","))}if(j.a0!=al){a0.val(j.a0)}}}}function ld(){var d=this;
if(!d.c5||!d.c3){d.c5=new ca(an,an);
d.c3=new ca(-an,-an);
for(var c=0,b=bg(d.fN);
c<b;
c++){var a=d.fN[c];
a.dT();
if(a.c3.x>d.c3.x){d.c3.x=a.c3.x}if(a.c5.x<d.c5.x){d.c5.x=a.c5.x}if(a.c3.y>d.c3.y){d.c3.y=a.c3.y}if(a.c5.y<d.c5.y){d.c5.y=a.c5.y}}}}function le(d,a){if(!a){a=[]}else{if(bO(a,this)){return}}a.push(this);
if(d>a8&&d<bb&&d!=a_){var c=this,b;
if(c.dH.x>c.dG.x){b=c.dH;
c.dH=c.dG;
c.dG=b}}a.pop()}function lf(e,b){if(!b){b=[]}else{if(bO(b,this)){return}}var d=this,c,a;
b.push(d);
if(e>a9){delete d.fl}if(e>a8&&e<bb){d.lg()}d.fN.sort(kw);
if(e!=a8&&e!=a_){e=ba}for(c=0,a=bg(d.fN);
c<a;
c++){d.fN[c].ff(e,b)}d.kt();
b.pop()}function lh(){delete this.c5;
delete this.c3}function li(){return this.d2}function lj(a){this.d2=a;
this.du()}function lk(c){var e=this,b,d,a;
if(!e.fl){b=[];
for(d=0,a=bg(e.fN);
d<a;
d++){bQ(b,e.fN[d].dt(c))}bQ(b,e.kg);
if(e.fw){b.push(e.fw)}b.sort(e4);
e.fl=b}return e.fl}function ll(d){for(var e=this,b=[],c=0,a=bg(e.fN);
c<a;
c++){bQ(b,e.fN[c].fa(d))}for(c=0,a=bg(e.kg);
c<a;
c++){b.push(e.kg[c].c0)}if(e.fw){b.push(e.fw.dH);
b.push(e.fw.dG)}return b}function lm(){for(var b=[],c=0,a=bg(this.fN);
c<a;
c++){bQ(b,this.fN[c].dV)}return b}function ln(){for(var b=[],c=0,a=bg(this.fN);
c<a;
c++){bQ(b,this.fN[c].dk)}return b}function lo(r,q,b){if(!r){return}if(q==al){q=jV}var h=r.x-q,c=r.x+q,g=r.y-q,a=r.y+q,f=r.z-b,t=r.z+b,e=[],m,l,k,d,p,o,n;
for(k=0,d=bg(this.fN);
k<d;
k++){p=this.fN[k];
for(m=0,l=bg(p.dV);
m<l;
m++){o=p.dV[m];
n=o.dW();
if(!o.dI&&!o.dR&&h<n.x&&n.x<c&&g<n.y&&n.y<a&&(b==al||(f<n.z&&n.z<t))){e.push(o)}}}return e}function lp(o,n){if(!o){return}if(n==al){n=lq}var f=o.x-n,b=o.x+n,e=o.y-n,a=o.y+n,d,k,h,g,c,l,p,m;
for(g=0,c=bg(this.fN);
g<c;
g++){l=this.fN[g];
for(k=0,h=bg(l.dk);
k<h;
k++){p=l.dk[k];
if(!p.dI&&!p.dR&&f<M.max(p.cZ.c0.x,p.c1.c0.x)&&M.min(p.cZ.c0.x,p.c1.c0.x)<b&&e<M.max(p.cZ.c0.y,p.c1.c0.y)&&M.min(p.cZ.c0.y,p.c1.c0.y)<a){m=o.eL(p.cZ.c0,p.c1.c0);
if(m<n){d=p;
n=m}}}}return d}function lr(n,m){if(!n){return}if(m==al){m=jV}var f=n.x-m,b=n.x+m,e=n.y-m,a=n.y+m,d=[],k,h,g,c,l,o;
for(g=0,c=bg(this.fN);
g<c;
g++){l=this.fN[g];
for(k=0,h=bg(l.h6);
k<h;
k++){o=l.h6[k];
o.dT();
if(f<o.c3.x+o.hN&&o.c5.x<b&&e<o.c3.y&&o.c5.y<a){d.push(o)}}}return d}function ls(b,a){return lt(b,this.jW(b,a))}function lu(b,a){return lt(b,this.lv(b,a))}function lt(g,b){if(!b||!bg(b)){return}var d=b[0],f=d.dW().cK(g,T),e,c,a;

for(c=1,a=bg(b);
c<a;
c++){e=b[c].dW().cK(g,T);
if(e<f){d=b[c];
f=e}}return d}function lw(){return this.c0}function lx(a){return[this.c0]}function ly(a){return[this.dH,this.dG]}function fr(b,c){var a=this;
eN.apply(a);
a.d2=b;
a.fN=[];
a.kg=[];
a.ki=0;
a.kj=new g0();
a.lz=lm;
a.lA=ls;
a.lB=lp;
a.lC=lu;
a.jW=lo;
a.lv=lr;
a.lD=ln;
a.ff=lf;
a.dT=ld;
a.lg=lh;
a.lE=kr;
a.ks=kv;
a.kt=k8;
a.ku=kC;
a.lF=k9;
a.lG=k_;
a.la=lb;
a.ju=k2;
a.lH=k7;
a.lI=k3;
a.kh=kQ;
a.ky=kR;
a.kA=kP;
a.fB=k1;
a.lc=kZ;
a.kB=kY;
a.fs=kp;
a.jM=ko;
a.gi=kz;
a.kS=kW;
a.kX=kO;
a.kI=kG;
a.kE=kH;
a.kF=kJ;
a.kM=kK;
a.lJ=kL;
a.kx=kN;
a.jl=lK;
a.dt=lk;
a.jL=fk;
a.fa=ll;
a.cl=eO;
a.b4=kf;
a.ee=e1;
a.cY=li;
a.lL=lj;
if(c){a.la(c)}}function fA(c,a){var b=this;
e0.apply(b);
if(c.x>a.x){b.dH=a;
b.dG=c}else{b.dH=c;
b.dG=a}b.dx=F;
b.ff=le;
b.dW=kn;
b.fa=ly;
b.eW=dD;
b.ds=fh;
b.b4=km;
b.cY=j2}function kl(a,c){var b=this;
e0.apply(b);
b.c0=new ca(a,c);
b.dx=F;
b.ff=ih;
b.dW=lw;
b.fa=lx;
b.eW=dv;
b.ds=fh;
b.b4=kk;
b.cY=j2}function lM(){var c=this,h=st.dr(),a=h.fN,g,d,b,f,e,k;
for(d=0,b=bg(a);
d<b;
d++){g=a[d];
for(f=0,e=bg(g.dV);
f<e;
f++){c.fE(g.dV[f])}for(f=0,e=bg(g.dk);
f<e;
f++){c.fI(g.dk[f])}for(f=0,e=bg(g.h6);
f<e;
f++){c.hy(g.h6[f])}}k=h.fw;
if(k){c.fB(k)}for(d=0,b=bg(h.kg);
d<b;
d++){c.kh(h.kg[d])}}function lN(d){for(var c,b=0,a=bg(this.dV);
b<a;
b++){c=this.dV[b];
c.ga(d);
e6(c)}}function lO(){for(var c,b=0,a=bg(this.h6);
b<a;
b++){c=this.h6[b];
c.h2();
this.hL(c)}}function lP(){var c=this,a=st.dr(),b;
while(bg(c.h6)){b=c.h6.pop();
b.ef.hL(b)}while(bg(c.dk)){b=c.dk.pop();
b.ef.fn(b)}while(bg(c.dV)){b=c.dV.pop();
b.ef.fo(b)}if(c.fw){a.kB();
c.kB()}while(bg(c.kg)){a.kA(c.kg.pop())}}function lQ(){var a=this;
return !bg(a.dV)&&!bg(a.h6)&&!bg(a.dk)&&!bg(a.kg)&&!a.fw}function lR(){var a=this;
while(bg(a.h6)){a.hL(a.h6[0])}while(bg(a.dk)){a.fn(a.dk[0])}while(bg(a.dV)){a.fo(a.dV[0])}a.kB();
while(bg(a.kg)){a.kA(a.kg[0])}}function lS(){var c=this,l=new b5(),g,f,d,b,e,m,k,h=[],a=[];
lT=c.b4(l,T);
for(g=0,f=bg(c.dk);
g<f;
g++){b=c.dk[g];
b1(h,b.cZ);
b1(h,b.c1)
}for(g=0,f=bg(c.hf);
g<f;
g++){b=c.hf[g];
b1(h,b.cZ);
b1(h,b.c1)}for(g=0,f=bg(h);
g<f;
g++){b=h[g];
e=l.b3(b);
lT.fE(e,T);
m=b.ef;
k=l.bM[m.bH];
if(!k){k=new fp();
l.bM[m.bH]=k;
a.push(k)}k.fE(e,T)}if(lT.fN){bQ(lT.fN,a)}else{lT.fN=a}for(g=0,f=bg(c.dV);
g<f;
g++){b=c.dV[g];
e=l.b3(b);
for(d=bg(b.dk)-1;
d>=0;
d--){if(!bO(c.dk,b.dk[d])){e=l.b3(b);
bV(l.b3(b.dk[d]),e.dk);
e.ff(ba)}}}for(g=0,f=bg(lT.dV);
g<f;
g++){lT.dV[g].dx=al}for(g=0,f=bg(lT.dk);
g<f;
g++){lT.dk[g].dx=al}for(g=0,f=bg(lT.hf);
g<f;
g++){lT.hf[g].dx=al}for(g=0,f=bg(lT.h6);
g<f;
g++){lT.h6[g].dx=al}lT.du()}function lU(){var d=this.lV(),b,c,a;
for(c=0,a=bg(d);
c<a;
c++){if(b=d[c].eh){return b}}}function lW(){var c=this,b,a;
if(!c.fN){c.fN=[];
for(b=0,a=bg(c.dk);
b<a;
b++){b1(c.fN,c.dk[b].ef)}for(b=0,a=bg(c.dV);
b<a;
b++){b1(c.fN,c.dV[b].ef)}for(b=0,a=bg(c.h6);
b<a;
b++){b1(c.fN,c.h6[b].ef)}}return c.fN}function lX(){var c=this,b,a;
if(!c.jx){c.jx=[];
for(b=0,a=bg(c.dk);
b<a;
b++){b1(c.jx,c.dk[b].cZ.h5);
b1(c.jx,c.dk[b].c1.h5)}for(b=0,a=bg(c.dV);
b<a;
b++){b1(c.jx,c.dV[b].h5)}for(b=0,a=bg(c.h6);
b<a;
b++){b1(c.jx,c.h6[b].h5)}}return c.jx}function lY(){this.copy();
this.lZ()}function l0(b,a){var d=this,c=b.ek;
if(c&&!bO(d.h6,c)){return d.hy(c,a)}else{b1(d.dV,b);
if(!d.l1){d.ff(ba);
b.dx=T;
if(!a){e6(b)}}return T}}function l2(a){var b=this;
if(bV(a,b.dV)&&!b.l1){b.ff(ba);
a.dx=F;
b.jL(a);
e6(a)}}function l3(d,c){b1(this.h6,d);
for(var e=this,b=0,a=bg(d.dV);
b<a;
b++){e.fE(d.dV[b],c)}for(b=0,a=bg(d.dk);
b<a;
b++){e.fI(d.dk[b],c)}for(b=0,a=bg(d.hf);
b<a;
b++){e.fI(d.hf[b],c)}if(!e.l1){e.ff(ba);
d.dx=T;
if(!c){e6(d)}}return T}function l4(c){var d=this,b,a;
if(bV(c,d.h6)&&!d.l1){d.ff(ba);
c.dx=F;
d.jL(c);
e6(c)}for(b=0,a=bg(c.dV);
b<a;
b++){d.fo(c.dV[b])}for(b=0,a=bg(c.dk);
b<a;
b++){d.fn(c.dk[b])}for(b=0,a=bg(c.hf);
b<a;
b++){d.fn(c.hf[b])}}function l5(c,a){var d=this,b=c.ek;
if(b&&!bO(d.h6,b)){return d.hy(b)}else{if(b1(d.dk,c)){if(!d.l1){d.ff(ba);
c.dx=T;
if(!a){e6(c)}}return T}return F}}function l6(a){var b=this;
if(bV(a,b.dk)&&!b.l1){b.ff(ba);
a.dx=F;
b.jL(a);
e6(a)}}function l7(b){for(var c=0,a=bg(b.dV);
c<a;
c++){this.fE(b.dV[c])}for(c=0,a=bg(b.dk);
c<a;
c++){this.fI(b.dk[c])}}function l8(b,a){this.fw=b;
if(!this.l1){this.ff(ba);
b.dx=T;
if(!a){e6(b)}}return T}function l9(){var a=this;
if(a.fw){if(!a.l1){a.ff(ba);
a.fw.dx=F;
e6(a.fw)}a.fw=al}}function l_(b,a){if(b1(this.kg,b)){if(!this.l1){this.ff(ba);
b.dx=T;
if(!a){e6(b)}}return T}return F}function ma(a){if(bV(a,this.kg)&&!this.l1){this.ff(ba);
a.dx=F;
e6(a)}}function mb(o,n,l){l=bx(l);
var c=this,k=st.dr(),a=k.fN,h,e,b,g,d,m,f;
for(e=0,b=bg(a);
e<b;

e++){h=a[e];
for(g=0,d=bg(h.dV);
g<d;
g++){f=h.dV[g];
if(!f.dR&&f.c0.cM(o,n,l)){c.fE(f)}}for(g=0,d=bg(h.dk);
g<d;
g++){f=h.dk[g];
if(!f.dR&&f.dW().cM(o,n,l)){c.fI(f)}}for(g=0,d=bg(h.h6);
g<d;
g++){f=h.h6[g];
if(!f.ev&&f.dW().cM(o,n,l)){c.hy(f)}}}m=k.fw;
if(m){if(m.dH.cM(o,n,l)||m.dG.cM(o,n,l)){c.fB(m)}}for(e=0,b=bg(k.kg);
e<b;
e++){f=k.kg[e];
if(f.c0.cM(o,n,l)){c.kh(f)}}}function mc(n,m){var c=this,k=st.dr(),a=k.fN,h,e,b,g,d,l,f;
for(e=0,b=bg(a);
e<b;
e++){h=a[e];
for(g=0,d=bg(h.dV);
g<d;
g++){f=h.dV[g];
if(!f.dR&&f.c0.cO(n,m)){c.fE(f)}}for(g=0,d=bg(h.dk);
g<d;
g++){f=h.dk[g];
if(!f.dR&&f.dW().cO(n,m)){c.fI(f)}}for(g=0,d=bg(h.h6);
g<d;
g++){f=h.h6[g];
if(!f.ev&&f.dW().cO(n,m)){c.hy(f)}}}l=k.fw;
if(l){if(l.dH.cO(n,m)||l.dG.cO(n,m)){c.fB(l)}}for(e=0,b=bg(k.kg);
e<b;
e++){f=k.kg[e];
if(f.c0.cO(n,m)){c.kh(f)}}}function md(c){var f=this,b,e,d,a;
if(!f.fl){b=[];
for(d=0,a=bg(f.dV);
d<a;
d++){e=f.dV[d];
b.push(e);
if(!c){b0(b,e.dk)}}for(d=0,a=bg(f.dk);
d<a;
d++){e=f.dk[d];
b1(b,e);
if(!c){if(b1(b,e.cZ)){b0(b,e.cZ.dk)}if(b1(b,e.c1)){b0(b,e.c1.dk)}}}for(d=0,a=bg(f.h6);
d<a;
d++){e=f.h6[d];
b.push(e)}bR(b,f.fw);
bQ(b,f.kg);
f.fl=b}return f.fl}function me(d){var c=this,b=[],k=[],g,l,m,h,f,e,a;
for(h=0,f=bg(c.dV);
h<f;
h++){g=c.dV[h];
if(!d||!g.dR){k.push(g);
b.push(g.c0)}}for(h=0,f=bg(c.dk);
h<f;
h++){g=c.dk[h];
if((!d||!g.dR)&&!bO(c.dV,g.cZ)&&!bO(c.dV,g.c1)){k.push(g.cZ);
k.push(g.c1);
b.push(g.cZ.c0,g.c1.c0)}}for(h=0,f=bg(c.h6);
h<f;
h++){g=c.h6[h];
if(g.ex){for(e=0,a=bg(g.ex);
e<a;
e++){b.push(g.ex[e].dH,g.ex[e].dG)}}if(!d){bR(b,g.fe);
bR(b,g.c5);
bR(b,g.c3)}if(d&&!g.ev&&bg(g.hg)){for(e=0,a=bg(g.hg);
e<a;
e++){l=g.hg[e];
if(!bO(k,l)){b.push(l.c0)}}}else{for(e=0,a=bg(g.dV);
e<a;
e++){l=g.dV[e];
if(!bO(k,l)){b.push(l.c0)}}}}m=c.fw;
if(m){b.push(m.dH,m.dG)}for(h=0,f=bg(c.kg);
h<f;
h++){b.push(c.kg[h].c0)}if(!d){bR(b,c.fe)}return b}function mf(k,h){if(!k){k=new b5()}h=(h==al?this.l1:h);
var d=this,c=new g0(h),b,f,a=[],g,e,l,j;
bK(k,d,c);
for(g=0,e=bg(d.h6);
g<e;
g++){b=d.h6[g];
f=k.b3(b);
c.hy(f,T);
l=b.ef;
j=k.bM[l.bH];
if(!j){j=new fp();
k.bM[l.bH]=j;
a.push(j)}j.hy(f,T)}for(g=0,e=bg(d.dk);
g<e;
g++){b=d.dk[g];
f=k.b3(b);
c.fI(f,T);
l=b.ef;
j=k.bM[l.bH];
if(!j){j=new fp();
k.bM[l.bH]=j;
a.push(j)}j.fI(f,T)}for(g=0,e=bg(d.hf);
g<e;
g++){b=d.hf[g];
f=k.b3(b);
b1(c.hf,f);
l=b.ef;
j=k.bM[l.bH];
if(!j){j=new fp();
k.bM[l.bH]=j;
a.push(j)}j.fI(f,T)}for(g=0,e=bg(d.dV);
g<e;
g++){b=d.dV[g];
f=k.b3(b);
c.fE(f,T);
l=b.ef;
j=k.bM[l.bH];
if(!j){j=new fp();
k.bM[l.bH]=j;
a.push(j)}j.fE(f,T)}if(d.fw){c.fB(k.b3(d.fw),T)}for(g=0,e=bg(d.kg);
g<e;
g++){c.kh(k.b3(d.kg[g]),T)}if(c.fN){bQ(c.fN,a)}else{c.fN=a}for(g=0,e=bg(c.fN);
g<e;
g++){j=c.fN[g];
j.g3=al;
j.ir()}if(d.fe){c.fe=d.fe.b4()}c.hu=d.hu;
c.du();
return c}function mg(h,b){var g=this,f,e=st.dr(),d,c,a;
if(!b){b=[]}else{if(bO(b,g)){return}}b.push(g);
if(h>a9){if(h!=a_){g.fN=al;
g.jx=al}g.fe=al;

g.fl=al}if(h!=a_){f=g.lV();
for(c=0,a=bg(f);
c<a;
c++){f[c].ff(ba,b)}if(d=g.fw){d.ff(h,b)}}e.ff(h,b);
b.pop()}function mh(d,a,b,c){this.k6=b;
this.k4=d;
this.k5=a;
this.cK=c}function mi(h,k){var b=[],l=h.lz(),m,g,f,d,e,a,c;
bT(l,this.dV);
for(e=0,a=bg(l);
e<a;
e++){c=l[e];
if(!c.ek){for(g=0,f=bg(this.dV);
g<f;
g++){d=this.dV[g];
if(!d.ek){m=c.c0.cK(d.c0,T);
if(m<=k){b.push(new mh(c,d,this,m));
break}}}}}return b}function mj(m,n){var e=this,d=[],p=m.lD(),b,a,o,l,k,g,h,c,f;
bT(p,e.dk);
for(h=0,c=bg(p);
h<c;
h++){f=p[h];
if(f.cZ.ek||f.c1.ek){continue}for(l=0,k=bg(e.dk);
l<k;
l++){g=e.dk[l];
if(g.cZ.ek||g.c1.ek){continue}if((b=f.cZ.c0.cK(g.cZ.c0,T))<=n&&(a=f.c1.c0.cK(g.c1.c0,T))<=n){d.push(new mh(f,g,e,0.5*(b+a)));
break}if((b=f.cZ.c0.cK(g.c1.c0,T))<=n&&(a=f.c1.c0.cK(g.cZ.c0,T))<=n){o=new mh(f,g,e,0.5*(b+a));
o.eI=T;
d.push(o);
break}}}return d}function mk(b,a){if(!a){a=this.dW().b4()}fg.apply(this,arguments)}function g0(a){var b=this;
eN.apply(b);
b.l1=a;
b.dV=[];
b.h6=[];
b.dk=[];
b.hf=[];
b.kg=[];
b.ff=mg;
b.fS=lQ;
b.lZ=lP;
b.js=lR;
b.cut=lY;
b.copy=lS;
b.lV=lW;
b.ml=lX;
b.mm=lU;
b.mn=lN;
b.ungroupGroups=lO;
b.dt=md;
b.jL=fk;
b.fa=me;
b.eC=mk;
b.mo=mi;
b.mp=mj;
b.addAll=b.bQ=lM;
b.addRectSelection=mb;
b.mq=mc;
b.fE=l0;
b.fo=l2;
b.hy=l3;
b.hL=l4;
b.fI=l5;
b.fn=l6;
b.kh=l_;
b.kA=ma;
b.fB=l8;
b.kB=l9;
b.fs=l7;
b.b4=mf}function mr(){var b="",A=fT[H].m,f=fT[H].fW,n=st.gj(),a=bg(n.dV),c={},o="",l=0,r=0,y={},u="",k=0,v=0,z,m,w,h,t,p,q,x,e=st.dr().lz(),d,g;
n.hf=[];
n.hu=T;
for(t=0,p=bg(e);
t<p;
t++){d=e[t];
if(!d.dx){z=d.ek;
m=(z&&z.type==as&&z.hj)||1;
if(y){k+=m*d.g9(F);
v+=m*d.g9(T);
y[d.di]=bx(y[d.di])+m;
h=d.et();
y[H]=bx(y[H])+(m*h);
k+=m*A*h;
v+=m*f*h}if(z){if(z.type==as&&!z.hj){k=al;
v=al;
y=al;
u=s("poly");
break}}}}for(t=0,p=a;
t<p;
t++){d=n.dV[t];
z=d.ek;
m=(z&&z.type==as&&z.hj)||1;
if(c){l+=m*d.g9(F);
r+=m*d.g9(T);
c[d.di]=bx(c[d.di])+m;
h=d.et();
c[H]=bx(c[H])+(m*h);
l+=m*A*h;
r+=m*f*h}if(w){if(!w.bJ(d.h5)){n.hu=F}}else{w=d.h5}if(z){n.hu=F;
if(z.type==as&&!z.hj){l=al;
r=al;
c=al;
o=s("poly")}}for(q=0,x=bg(d.dk);
q<x;
q++){if(!d.dk[q].dx){n.hf.push(d.dk[q])}}}for(t=0,p=bg(n.dk);
t<p;
t++){g=n.dk[t];
if(w){if(!w.bJ(g.cZ.h5)){n.hu=F}}else{w=g.cZ.h5}if(g.ek){n.hu=F}if(!g.cZ.dx||!g.c1.dx){n.hf.push(g)}}n.hu=(n.hu&&a>0&&bg(n.hf)<=2);
if(c){o=ms(c)}if(y){u=ms(y)}mt($("#bondRotate"),bg(n.hf)==1);
mt($("#groupSelection"),n.hu);
mt($("#ungroupSelection"),bg(n.h6));
if(a){b+=s("sele")+":&nbsp;"+o+mu(l,r);
if(u){b+=S+s("rem")+":&nbsp;"+u+mu(k,v)}}$("#info").html(b)}function mu(b,a){if(b>0){return"&nbsp;("+round(b,2,3)+"/"+round(a,4,3)+")"}return""}function ms(h){var f,b,a=[C,H],d,e,g,c="";
bi(h);

for(f=0,b=bg(a);
f<b;
f++){d=a[f];
e=h[d];
if(e>0){c+=d;
if(e>1){c+=aE+e+aF}}}for(d in h){e=h[d];
g=fT[d];
if((!g||!g.fV)&&e>0){c+=d;
if(e>1){c+=aE+e+aF}}}return c}function dr(){var a=this;
if(a.mv){return a.mv}a.mw=bA(a.mw,0,bg(a.mx)-1);
return a.mx[a.mw]}function gj(){return this.dr().kj}function gO(){return this.my}function mz(a){this.my=a}function mA(){if(this.my){this.my.mB=al;
this.my.mC=al;
this.my=al}}function mD(){if(this.mE()){this.mF();
resetDirty(aV);
this.mw--;
mG(aV);
this.dr().eW();
mr()}}function mH(){return this.mw>0}function mI(){if(this.mJ()){this.mF();
resetDirty(aV);
this.mw++;
mG(aV);
this.dr().eW();
mr()}}function mK(){return this.mw<bg(this.mx)-1}function mL(){var a=bg(this.mx)-mM;
if(a>0){this.mx.splice(0,a);
this.mw-=a}}function mN(){var a=this;
a.mL();
a.mx.splice(a.mw,0,st.dr().b4(new b5(T)));
a.mw++;
a.mx.length=a.mw+1}function mO(a){var b=this;
b.mL();
b.mw++;
b.mx[b.mw]=a;
b.mx.length=b.mw+1}function mP(){var b=this,a=b.mx[b.mw];
b.mx[b.mw]=a.b4(new b5(T));
b.mv=a}function mQ(){return !!this.mv}function mF(){var a=this;
if(a.mv){a.mv.dm();
a.mv=al;
a.mA();
a.dr().eW()}}function mR(){var a=this;
if(a.mv){a.mO(a.mv);
a.mv=al;
a.mA();
mr()}}function mS(){var a=this;
a.mx=[];
a.mx[0]=new fr(aV);
a.mw=0;
a.gN=F;
a.mP=mP;
a.mQ=mQ;
a.mF=mF;
a.mR=mR;
a.dr=dr;
a.gj=gj;
a.gO=gO;
a.mz=mz;
a.mA=mA;
a.mL=mL;
a.mN=mN;
a.mO=mO;
a.undo=mD;
a.mE=mH;
a.redo=mI;
a.mJ=mK}function mT(a){$("#"+a).click()}function activateTool(d,b){mU();
mV(gP,b);
if(gP!=b){mW=F;
var a=F;
switch(b){case aQ:case aR:mX();
a=T;
break;
case aT:case aU:a=T;
break;
case aL:mW=T;
break}if(!a){$(mY).css({border:"",d3:""});
$(d).css({border:"1.5px solid black",d3:"0.5px"});
mY=d}gP=b}else{if(gS&&b==aP){var c=st.gj();
if(!c.fS()){mZ()}}}hZ()}function useAtom(a){m0(a);
$("#atom").click()}function mV(b,a){switch(b){case aQ:case aR:gR=F;
st.mF();
break}}function m1(){m2(mY)}function m2(a){if(a){$(a).trigger("click",{m3:T})}}function m4(a){m5=a.ctrlKey;
return bf(a)}function m6(c){if(!st.gN){var a=new FileReader(),b;
a.onload=function(e){var d=e.target.result;
if(m5){activateTool(al,aQ);
m7(new fr(aV,d))}else{lG(d)}};
if(c.dataTransfer){b=c.dataTransfer.files}else{if(c.target){b=c.target.files}}if(b){a.readAsText(b[0]);
return bf(c)}}}function m8(b,a){if(b&&(!a||!a.m3)){m9=b.target
}}function m_(a){m9=al}function na(d){if(!d||!d.data||!d.data.m3){m8(d);
var c=$(m9).parent().children(at),a=aV.height,b=c.height();
c.fadeIn(50).css("z-index",10000);
c.css(c.offset().top+b>a?{position:"absolute",top:(a-b-25)+"px"}:{position:al,top:al})}}function nb(a){setTimeout(function(){if(!a){m_()}var b=$(at).filter(":visible");
if(bg(b)){if(m9){b=b.not($(m9).parent().children())}if(bg(b)){if(nc){b.hide()}else{b.fadeOut(100)}}}if(gS&&!bg(b)){na()}},100)}function nd(a){if(a.target.tagName.toLowerCase()=="img"){a3.prop("src",a.target.src);
a4=T;
ne()}}function mX(){a4=F;
nf()}function ne(){if(a4){a3.show()}}function nf(){if(a4){a3.hide()}}function ng(){var b=navigator.userAgent.toLowerCase(),a="";
if(/android|blackberry|kindle|mobile|phone/.test(b)){a="mobile"}else{if(/windows|macintosh|linux/.test(b)){a="desktop"}else{if(/Pad|Tablet/.test(navigator.userAgent)){a="mobile"}else{if(/CrOS|Mac/.test(navigator.userAgent)){a="desktop"}else{a=(nh()?"mobile":"desktop")}}}}return a}function nh(){return"ontouchstart" in document.documentElement}function setBond(a,b){gT=a;
gU=b}function hw(){hY(aV);
st.mN()}function hz(a){hZ(T);
e9(a);
mr()}function ni(h){for(var b=aY.val(),g,d,c="",f=0,a=bg(b);
f<a;
f++){g=b.charCodeAt(f);
if((!d&&g>96&&g<123)||(g==104&&b!="Ph"&&b!="Rh"&&b!="Th")){g-=32}d|=(g>64&&g<91);
c+=String.fromCharCode(g)}if(b!=c){m0(c)}}function nj(d){if(nk){hv(F);
return}if(nl(d)){return T}nm=T;
var c=d.which,b,a;
if(nn(aY,d)&&c!=13){if(!d.shiftKey&&((((a=aY.val())==""||!isNaN(be(a)))&&c>64&&c<91)||(c==72&&a!="P"&&a!="R"&&a!="T"))){m0(a+String.fromCharCode(c));
return F}return T}b=(d.altKey?0.2:1);
switch(c){case 37:no(-b,0);
break;
case 38:no(0,-b);
break;
case 39:no(b,0);
break;
case 40:no(0,b);
break;
case 74:case 36:no(0,0,b);
break;
case 75:case 35:no(0,0,-b);
break;
case 33:np();
nq();
break;
case 34:nr();
nq();
break}nb();
return bf(d)}function nn(a,b){return a&&b&&a.is(b.target)}function nl(a){return nn(aZ,a)||nn(a0,a)||getSelection().toString()}function ns(a){return(nn(aY,a)||nl(a)?T:bf(a))}function hv(a){if(a){nk=T}else{clearTimeout(nt);
nt=setTimeout(function(){nk=F},500)}}function nu(h){if(st.gN||nk){nk=F;
return}if(nl(h)){return T}if(nn(aY,h)){if(h.which==27||h.which==113){aY.blur()}if(h.which!=13){return T}}var f=h.which,a,d=h.ctrlKey,b=h.altKey,g=(!d&&!h.shiftKey&&!b),c=st.gj();
switch(f){case 13:if(ej){hw();
ej.ga(gQ());
e6(ej);
hz(aV)}else{if(!c.fS()){hw();
c.mn(gQ());
hz(aV)}}break;
case 27:ej=al;
hX=al;
if(gR){nv=T;
gR=F;
st.mF();
hY(aV)}else{st.mA();
clearSelection()}m1();
break;
case 46:if(c.fS()){mT("deleteButton")}else{mZ()}break;
case 49:case 97:mT("single");
break;
case 50:case 98:mT(d?"clean2D":"double");
break;
case 51:case 99:mT(d?"clean3D":"triple");
break;
case 65:if(d){hw();
c.bQ();
hz(aV)}else{mT(aG)}break;
case 67:if(d){copy()}else{if(g){a=T}}break;
case 68:mT("singleDown");

break;
case 69:mT(aK);
break;
case 71:if(d){if(h.shiftKey){doUngroup()}else{createGroup()}}break;
case 76:if(g){a="Cl"}break;
case 77:mT("singleEither");
break;
case 66:case 70:case 72:case 73:case 78:case 80:if(g){a=T}break;
case 79:if(d&&b){$("#fileUpload").click()}else{if(g){a=T}}break;
case 81:mT(aL);
break;
case 82:if(g){a="Br"}break;
case 83:if(d&&b){saveFile()}else{if(g){a=T}}break;
case 84:mT("3d_rotate");
break;
case 85:if(d){doUngroup()}else{mT("singleUp")}break;
case 86:if(d){paste()}else{mT(aM)}break;
case 87:mT(aI);
break;
case 88:if(d){cut()}break;
case 89:if(d){st.redo()}break;
case 90:if(d){st.undo()}break;
case 107:case 171:case 187:if(ej){hw();
ej.g7(1);
e6(ej);
hz(aV)}break;
case 109:case 173:case 189:if(ej){hw();
ej.g7(-1);
e6(ej);
hz(aV)}break;
case 110:case 190:if(ej){hw();
ej.g8();
e6(ej);
hz(aV)}break;
case 113:aY.focus().select();
break}if(a){if(a===T){a=String.fromCharCode(f)}m0(a);
if(ej){hw();
ej.ga(gQ());
e6(ej);
hz(aV)}}return bf(h)}function nx(b){var a=1/hM;
return new ca((b.x-0.5*ny.x)*a+nz.x,(b.y-0.5*ny.y)*a+nz.y)}function nA(a){var b=aW.offset();
return nx(new ca(a.pageX-b.left,a.pageY-b.top))}function nB(b,a){if(a){nC=[];
nD="M"+b;
nE={x:b.x,y:b.y,x2:b.x,y2:b.y}}else{nD+="L"+b;
nE.x=M.min(nE.x,b.x);
nE.x2=M.max(nE.x2,b.x);
nE.y=M.min(nE.y,b.y);
nE.y2=M.max(nE.y2,b.y)}nC.push(b)}function nF(){return(ej?ej.ef:(nG?nG.ef:(hX?hX.ef:al)))}function mU(){ej=nG=hX=kT=kV=al}function nH(b){if(parent){parent.postMessage("focused","*")}if(gR||b.which!=1||st.gO()){return}nb();
nI(b);
gR=T;
nv=F;
nJ=ej;
nK=nG;
nL=hX;
nM=kV;
nN=kT;
nO=F;
var d=nA(b),a,c;
nB(d,T);
if(!st.gN){switch(gP){case aK:case aL:case aT:case aI:case aG:case aH:case aP:case aJ:st.mP();
break;
case aM:case aN:case aO:a=st.gj();
st.mP();
if(a.fS()){a=new g0(T);
if(c=nF()){a.fs(c)}else{a.bQ()}}mU();
st.mz(a);
break}}if(!st.gN){return bf(b)}}function nP(c,d,b,a){if(d7){nQ(c,d,b,a)}else{nR+=b;
nS+=a;
if(nT){clearTimeout(nT)}nT=setTimeout(function(){nQ(c,d,nR,nS);
nR=0;
nS=0},500)}return bf(c)}function nQ(d,h,c,a){var g=nA(d),f,j,k,b,i;
if(st.gN||d.ctrlKey){if(a<0){zoomOut()}else{zoomIn(cr(g,nz))}}else{if(d.shiftKey){f=(d.altKey?0.5:2.5);
if(d.ctrlKey){no(-a*f,c*f)}else{no(c*f,-a*f)}}else{if(!(j=st.gO())){hw();
j=st.gj();
if(j.fS()){j=new g0(T);
j.bQ()}}f=-M.PI*a/(d.altKey?ae:12);
if(gP==aO){i=j.hf[0];
k=(i.cZ.dx?i.cZ:i.c1);
b=(i.cZ.dx?i.c1:i.cZ);
j.eR(f,k.c0.b4(),b.c0)}else{k=j.mm();
j.eD(f,(k?k.c0.b4():al))}}}mU();
hY(aV);
hZ();
nU()}function nV(y){nb();
if(st.gN&&y.which!=1){nW()
}else{if(y.which==1&&!nv){nI(y);
var f=nX,q=nC[0],b=st.dr(),z,n,t,c,w,u,l,o,x,d,j,r,h,k,g,p,m,v={},a=(st.gN?aU:gP);
if((nO||!y.ctrlKey)&&(z=st.gO())){t=z.mp(b,nY);
for(w=0,u=bg(t);
w<u;
w++){b.lI(t[w],v)}c=z.mo(b,nY);
for(w=0,u=bg(c);
w<u;
w++){b.lH(c[w],u==1)}n=z.lV();
nZ(n);
for(w=0,u=bg(n);
w<u;
w++){b.fs(n[w])}b.lE();
z.ff(a8);
st.mR()}else{if(!nO&&y.ctrlKey&&(l=(ej||nG))){switch(a){case aP:b.jM(l.ef);
st.mR();
break;
default:o=st.gj();
if(!y.shiftKey){o.js()}o.fs(l.ef);
st.mR()}}else{switch(a){case aU:if(nO){zoomBox(q,f)}else{zoomIn(f)}break;
case aM:case aN:case aO:st.mR();
break;
case aK:case aL:if(!z){o=st.gj();
if(!y.shiftKey){o.js()}x=0;
if(!nO){x=3;
if(nG){o.fI(nG)}if(kV){o.fB(kV)}if(kT){o.kh(kT)}}if(a==aK){o.addRectSelection(q,f,x)}else{nB(f);
nB(q);
o.mq(nC,nE)}}st.mR();
break;
case aS:if(!hX){hw();
d=b.ky(f);
e6(d);
hz(aV)}break;
case aT:if(hX){st.mF()}else{if(!nO){f.x+=k0}b.lc(q,f);
e6(b);
st.mR();
m1()}break;
case aI:if(nG&&!ej&&!nO){nG.iG();
st.mR()}else{r=F;
if(nJ){j=nJ.ef;
if(!nJ.ek&&nJ.bJ(ej)){f=ge(nJ,1);
k=new gd(f);
g=new gg(nJ,k,1,0);
j.fE(k);
j.fI(g);
k.ga(gQ());
e6(nJ);
hY(aV);
st.mR();
break}}else{if(eg=="rxn"||!bg(b.fN)){j=new fp();
b.fs(j);
r=T}else{j=b.fN[0]}}if((!nJ||!nJ.ek)&&(!ej||!ej.ek)&&jp(y,q,f,j,nJ,ej)){if(r){b.ks();
b.kt()}st.mR()}else{st.mF()}}break;
case aG:if(ej){ej.ga(gQ());
e6(ej);
st.mR();
break}case aH:if(nG&&!ej&&!nO){nG.iG();
st.mR()}else{if(hX){st.mF()}else{if((nK&&!nJ)||(nJ&&nJ.ek)||(ej&&ej.ek)){st.mF()}else{p=gQ();
gf.fR();
h=nJ;
k=ej;
if(h&&k&&!k.bJ(h)){if(g=h.g5(k)){g.iG()}else{h.ef.fJ.ju(h,k)}}else{if(k&&k.bJ(h)){nO=F;
k=al}if(!nO){f=al}r=F;
m=[];
if(eg!="rxn"){j=b.fN[0]}else{if(h){j=h.ef}else{if(k){j=k.ef}}}if(!j){j=new fp();
b.fs(j);
r=T}if(!h){h=new gd(q.b4());
j.fE(h);
m.push(h)}if(!k&&(nO||nJ||(a==aH&&p==C))){k=new gd(ge(h,gT,f,y));
j.fE(k);
m.push(k)}j.fI(new gg(h,k,gT,gU));
for(w=0,u=bg(m);
w<u;
w++){m[w].ga(p)}if(r){b.ks();
b.kt()}}st.mR();
gR=F;
hY(aV);
hZ(T)}}}break;
case aP:if(hX){hX.ef.hL(hX);
hX=al}else{if(ej){ej.ef.fo(ej);
ej=al}if(nG){nG.ef.fn(nG);
nG=al}if(kV){kV.fJ.kB(kV);
kV=al}if(kT){kT.fJ.kA(kT);
kT=al}}st.mR();
break;
case aJ:if(ej){j=ej.ef;
if(j&&!ej.bJ(j.eh)){e6(j.eh);
j.eh=ej;
e6(ej);
st.mR()}else{st.mF()}}break}}}gR=F;
if(a==aQ){if(n0){n1(y,y.pageX,y.pageY)
}else{m1()}}nU()}}}function n2(g,i){var a={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},d=g.originalEvent,f=d.changedTouches,b=a[d.type],h,c;
if(b){if(i||bg(f)==1){h=f[0];
c=document.createEvent("MouseEvent");
c.initMouseEvent(b,true,true,window,1,h.screenX,h.screenY,h.clientX,h.clientY,false,false,false,false,0,null);
h.target.dispatchEvent(c);
d.preventDefault();
if(b=="mouseup"&&!nO){c=document.createEvent("MouseEvent");
c.initMouseEvent("click",true,true,window,1,h.screenX,h.screenY,h.clientX,h.clientY,false,false,false,false,0,null);
h.target.dispatchEvent(c)}return T}return F}}function hO(a){if(a){a.remove();
a.clear()}}function hY(a){if(!a){return}hO(a.jt);
if(!hX){hO(a.hP)}if(!ej){hO(a.fy)}}function hZ(e){var d=st.dr(),a=d.lA(nX),c=d.lC(nX),b;
if(ej&&(e||!ej.bJ(a))){ej.hd();
e6(ej);
n3("outAtom",ej)}if(hX&&(e||!hX.bJ(c))){hX.hd()}if(!a){ej=al;
b=d.lB(nX);
if(nG&&(e||!nG.bJ(b))){n3("outBond",nG)}if(b&&(e||!b.bJ(nG))){n3("overBond",b)}nG=b;
if(b){e6(b)}}else{if(e||!a.bJ(ej)){ej=a;
if(nG){e6(nG);
n3("outBond",nG);
nG=al}ej.hc();
e6(ej);
n3("overAtom",ej)}}if(!c){hX=al}else{if(e||!c.bJ(hX)){hX=c;
hX.hc()}}}function n3(a,b){$(window).trigger(a,{obj:b})}function nI(b){m5=b.ctrlKey;
var a=b.clientX,c=b.clientY;
if(gS){a2.css({left:a-4,top:c-4})}a3.css({left:a+30,top:c+30});
nX=nA(b);
hY(aV);
if(!ej){gf.fR()}hZ()}function n4(b,a,c){if(d7){n5(b,a,c)}else{clearTimeout(n6);
n6=setTimeout(function(){n5(b,a,c)},250)}}function n5(h,p,n){nI(h);
aW.css("cursor","");
var o,c,j,l,b,q,t,m,d,a,r,g,f,k=(st.gN?aU:gP);
if(gR){o=nX;
c=nC[0];
j=st.dr();
if(mW){nB(o)}if(!nO){nO=(o.cK(c)>n7);
if(nO){switch(k){case aK:case aL:if((nJ&&nJ.dx)||(nK&&nK.dx)||(nM&&nM.dx)||(nN&&nN.dx)){l=st.gj()}else{l=new g0(T);
if(nJ){l.fE(nJ)}else{if(nK){l.fI(nK)}else{if(nL){l.hy(nL);
hX=al;
hY(aV)}else{if(nM){l.fB(nM)}else{if(nN){l.kh(nN)}}}}}}if(!l.fS()){st.mz(l)}break}}}if(l=st.gO()){switch(k){case aM:case aO:if(nO){b=bx(l.mC);
q=M.atan2(o.y-c.y,o.x-c.x);
if(k==aO){r=l.hf[0];
t=(r.cZ.dx?r.cZ:r.c1);
m=(r.cZ.dx?r.c1:r.cZ);
l.eR(q-b,t.c0.b4(),m.c0)}else{l.eD(q-b,c)}l.mC=q;
l.eW();
aV.jt.push(aV.path("M"+c+"L"+o).attr(ax,"#f00").attr(az,c6),aV.text(o.x,o.y+30/hM,round(q*ag,1)+"°").attr(aw,2+20/hM))}break;
case aN:if(nO){b=(l.mB||c);
l.mB=o;
q=(h.altKey?0.01:0.1);
l.eE(q*(b.y-o.y),q*(o.x-b.x),l.dW())}break;
default:n8(c,o,j,aV)}}else{switch(k){case aU:case aK:n9(aV,c,o);
break;
case aL:aV.jt.push(aV.path(nD+"Z").attr(n_));
break;
case aI:if((!nJ||!nJ.ek)&&(!ej||(!ej.ek&&!ej.bJ(nJ)))){jp(h,c,o,al,nJ,ej)}break;
case aG:case aH:if(nO&&!nK&&(!nJ||!nJ.ek)&&(!ej||(!ej.ek&&!ej.bJ(nJ)))){gf.fR();

t=nJ;
m=ej;
d=[];
if(t&&(r=t.g5(m))){r=gf.fI(r);
r.iG()}else{a=gQ();
if(!t){t=gf.fE(new gd(c.b4()));
d.push(t)}if(!m){m=gf.fE(new gd(ge(t,gT,o,h)));
d.push(m)}gf.fI(new gg(t,m,gT,gU));
for(g=0,f=bg(d);
g<f;
g++){d[g].ga(a)}}gf.eW()}break;
case aT:if(nO){gf.fQ(c,o);
gf.eW()}break;
case aP:if(ej){ej.ef.fo(ej);
ej=al}if(nG){nG.ef.fn(nG);
nG=al}break}}}else{if(nG){switch(k){case aG:aW.css("cursor","move");
break;
case aH:e6(nG);
var r=gf.fI(nG);
r.iG();
gf.eW();
break}}}switch(k){case aK:case aL:if(ej||nG){aW.css("cursor","move")}break}nU()}function n9(d,c,e){var b=M.min(c.x,e.x),a=M.min(c.y,e.y);
d.jt.push(d.rect(b,a,M.abs(e.x-c.x),M.abs(e.y-c.y)).attr(n_))}function n8(b,j,g,c){var h=st.gO(),m,l,d,a,n,k,f,e;
if(!h||st.gN){return}m=(h.mB||b);
l=j.cq(m);
h.cl(l.x,l.y);
h.mB=j;
if(g){d=h.mo(g,1.5*nY);
for(f=0,e=bg(d);
f<e;
f++){a=d[f];
n=a.k5.c0;
k=a.k4.c0;
c.jt.push(c.ellipse(n.x,n.y,nY,nY).attr(oa).attr(aD,a.cK<nY?ob:oc));
c.jt.push(c.ellipse(k.x,k.y,nY,nY).attr(oa).attr(aD,a.cK<nY?ob:oc))}}}function od(c,d,b){var a="templates/"+b+".mol";
jQuery.get(a,{},function(e){d.push(new oe(a,e,c));
od(c,d,b+1)},"text")}function of(){og.server=[];
var a=$("#builtinTemplates").remove(".template");
if(!bB("noTemplates")){od(a[0],og.server,0)}}function addTemplate(b,e){var d,a,c=$(e?"#tmpl"+e:"#serverTemplates"),f=og.server;
if(!c.length){$("<tr>").append($("<td>").addClass("menuWithPopup").mouseleave(nb).click(nb).append(c=$("<div id="+bv("tmpl"+e)+' class="menuPopup templatesMenu">'+getImgSt("del")+' class="button" style="float:right" onClick="hideMenu();"/></div>').css({opacity:0.85}).mouseleave({obj:this},oh).click(m_)).append($(getImgSt(e)+' class="button"/>').mouseenter(na).click(m8))).insertBefore("#groupSelection")}if($.isArray(b)){for(d=0,a=bg(b);
d<a;
d++){f.push(oi(b[d],c))}}else{f.push(d=oi(b,c));
return d}}function oi(a,b){return new oe(al,a,b)}function gb(b){if(!b){return}b=b.charAt(0).toUpperCase()+b.substr(1);
for(var d,c=0,a=bg(og.server);
c<a;
c++){d=og.server[c];
if(d.eh&&$.inArray(b,d.oj)!=-1){return d}}}function ok(){if(this.url){jQuery.get(this.url,{},function(a){this.fJ=new fr(this.da,a);
this.eW()},"text")}}function ol(){var a=this,f=a.fJ,c,b,e,g,j=j6,h=j6,d=a.om.parent(".templatesMenu");
for(c=0,b=bg(f.fN);
c<b;
c++){e=f.fN[c];
if(!a.eh){a.eh=e.eh}if(!a.tooltip){a.tooltip=e.a0}if(!$.isArray(a.oj)){a.oj=e.aZ}}g=by(a.tooltip);
if(a.oj&&bg(a.oj)){g+=" ("+a.oj.join(",")+")"}a.om.attr("title",g);
f.dT();
j+=M.max(oo-f.c3.x+f.c5.x,0);
h+=M.max(oo-f.c3.y+f.c5.y,0);
a.da.setViewBox(f.c5.x-j,f.c5.y-h,f.c3.x-f.c5.x+2*j,f.c3.y-f.c5.y+2*h);
d.show();
f.eW();
d.hide()}function nZ(c){for(var b=0,a=bg(c);
b<a;
b++){e6(c[b].eh);
c[b].eh=al}}function op(b,a,c){n0=F;
oq=b.data.obj;
n1(b,a,c);

oh();
setTimeout(nb,700)}function or(b,a,c){n0=T}function n1(b,a,c){os();
n4(b,a,c)}function os(){activateTool(al,aQ);
m7(oq.fJ.b4(),oq.eh)}function m7(c,b){st.mP();
var e=c.fN,g=st.dr(),d,a,f=new g0(T);
c.lL(aV);
for(d=0,a=bg(e);
d<a;
d++){g.fs(e[d],F,T);
f.fs(e[d])}gR=T;
nC[0]=(b?b.c0:f.dW());
st.mz(f)}function ot(c){var b=c.data.obj,a=$(b.om[0].firstChild).clone().attr("width",ou).attr("height",ou);
$("#overlay").empty().append(a).show().mouseenter(function(){$(".templatesMenu").hide()})}function oh(){var a=$("#overlay");
if(bd){a.hide()}else{a.fadeOut()}}function gc(){var a=new b5();
this.fJ.b4(a);
return a.b3(this.eh)}function oe(b,a,c){var f=this,e,d=(gS?33:50);
f.url=b;
f.om=$("<div>").css({display:"inline-block"}).addClass("button template").appendTo(c).click({obj:f},op).dblclick({obj:f},or).mouseenter({obj:f},ot);
f.da=new Raphael(f.om[0],ov,ow);
bG.apply(f.da);
mG(f.da);
f.fJ=new fr(f.da,a);
if(e=f.fJ.fN[0]){e=by(e.a0).substr(0,12);
f.om.append($("<div>").css({position:"absolute",top:0,height:"100%",padding:"25% 3px","background-color":"white",opacity:0.3,"font-size":(bg(e)>6?d:d*2)+"%"}).text(e))}f.gc=gc;
f.reload=ok;
f.eW=ol;
f.eW()}var isReady=F,lang=bw(bB("lang"),"en"),bE=["en","de"],langDef={},ox=(typeof nw!="undefined"),oy=!!bB("embedded"),d7=Raphael.svg,gS=(ng()=="mobile"),iconSize=(gS?35:20),nc=(bd||$.browser.opera),nz=new ca(),hM,oz=1000,oA=0.001,oB=0.25,h1=16,ny,st,lT,gf,gP,gT=1,gU=0,eg=bw(bB("mode"),"mol"),ep=!!bB("debug"),nv=F,m5,nX,m9,ej,hX,nG,kT,kV,gR=F,nk=F,nt,n6,nT,nR=0,nS=0,nO,mW=F,nC=[],nD="",nE={},nJ,nL,nK,nN,nM,oC=4,n7=3,mY,oq,n0=F;
bD();
var mM=30,jb=12,jr=30,ov=50,ow=50,es=10,c4=es*1.4,dc=2,c8=1.5,c7=0.06,c_=0.01,d3=1.5*es,dw=7,k0=55,dE=7,dF=0.2,hC=0.5,nY=0.25*es,oD=0.1,er=0.38,c6=(d7?0.333333333:1),dA=1,eo=0.02*es,en=6,hJ=es*0.5,jV=es*0.25,lq=2,jq=30,ou,hQ="#000",dz=hQ,db=(ep?"gray":"#fff"),ei="#f00",dy="#0f0",dJ="#666",em="#00f",el="#f00",ob="#0f0",oc="#f00",oa={"stroke-width":0,"fill-opacity":0.4},n_={stroke:dy,fill:dy,"fill-opacity":0.2},hT={stroke:"deepskyblue",fill:"deepskyblue","fill-opacity":0.2,"stroke-width":c6},og={},j6=0.45*es,oo=3.5*j6,oE=c4/720,oF=0.2,j4=0.3,j3=0.6*c4,oG=0.3*c4,oH=400,oI=80,oJ=0.6,oK=0.1;
function gQ(){var a=aY.val();
if(!a){a=C
}return a}function m0(a){aY.val(a)}function nq(){var a=1/hM;
if(aV){aV.setViewBox(nz.x-0.5*a*ny.x,nz.y-0.5*a*ny.y,ny.x*a,ny.y*a)}if(!d7){st.dr().eW()}}function oL(a){nz=a;
nq()}function oM(a){if(!a){return oC}return M.max(M.min(a,oz),oA)}function nW(f){var c=st.dr(),b,e,a,d;
if(bg(c.lz())>0){c.dT();
b=c.c5.x-d3;
e=c.c5.y-d3;
a=c.c3.x+d3;
d=c.c3.y+d3;
hM=oM(M.min(ny.x/(a-b),ny.y/(d-e)));
if(f&&hM>f){hM=f}}else{hM=oC}oL(new ca(0.5*(b+a),0.5*(e+d)))}function zoomBox(a,b){hM=M.min(oz,ny.x/M.abs(b.x-a.x),ny.y/M.abs(b.y-a.y));
oL(cr(a,b))}function zoomIn(a){np();
if(a){oL(a)}else{nq()}if(!st.gN){m1()}}function np(){if(hM<oz){hM/=1-oB}}function zoomOut(){if(gP==aU){m1()}nr();
nq()}function nr(){if(hM>oA){hM*=1-oB}}function no(b,a,f){var e=b*es/hM,d=a*es/hM,c=st.gj();
if(st.gN||c.fS()){nz.x+=e;
nz.y+=d;
if(f&&!st.gN){hw();
st.dr().cl(0,0,f);
hz(aV)}nq()}else{hw();
c.cl(e,d,f);
hz(aV)}hZ()}function eB(a){if(!gR){return bf(a)}}function ih(){}function oN(){if(!aW){aW=$("#svgParent")}if(aV){aV.canvas.style.display="none"}ny=new ca(aW.width(),aW.height());
if(aV){aV.canvas.style.display="";
aV.setSize((d7?"100%":ny.x),ny.y)}else{aV=new Raphael("svgParent",(d7?"100%":ny.x),ny.y);
bG.apply(aV);
aV.oO=T;
st=new mS();
mG(aV);
gf=new fO();
aV.canvas.onselectstart=bf;
aW.mousedown(nH).mousemove(n4).mouseup(nV).mousewheel(nP).mouseover(ne).mouseout(nf).bind("touchstart",n2).bind("touchmove",n2).bind("touchend",n2)}nq()}function clearSelection(){hw();
st.gj().js();
hz(aV)}function mZ(){hw();
st.gj().lZ();
hz(aV)}function cut(){hw();
st.gj().cut();
hz(aV)}function copy(){st.gj().copy()}function paste(){activateTool(al,aR);
st.mP();
var d=lT.b4(al,T),c,a,b=d.lV(),e=st.dr();
for(c=0,a=bg(d.kg);
c<a;
c++){e.kh(d.kg[c])}for(c=0,a=bg(b);
c<a;
c++){e.fs(b[c])}gR=T;
nC[0]=d.dW();
st.mz(d);
hZ()}function flip(a){hw();
var b=st.gj();
if(b.fS()){b.bQ();
b.eI(a,nz);
b.js()}else{b.eI(a)}hz(aV)}function doUngroup(){var a=st.gj();
if(hX){hw();
hX.h2();
hz(aV)}else{if(!a.fS()){hw();
a.ungroupGroups();
hz(aV)}}}function clearReaction(){lG("")}function mG(a){a.clear();
a.jt=a.set();
a.hP=a.set();
a.fy=a.set();
a.hV=a.path("M0,0");
a.e7=[]}function saveFile(){oP(open("data:chemical/x-mdl-molfile;fileName="+(eg=="rxn"?"reaction.rxn":"molecule.mol")+";content-disposition=attachment,"+encodeURIComponent(lF()),"Download"))}function saveSVG(){if(aV&&aV.canvas){var c=st.dr(),b,a;
c.dT();

b=c.c3.x-c.c5.x+2*d3;
a=c.c3.y-c.c5.y+2*d3;
aV.setSize(b,a);
aV.setViewBox(c.c5.x-d3,c.c5.y-d3,b,a);
oP(open("data:application/octet-stream;fileName=structure.svg;content-disposition=attachment,"+encodeURIComponent(aV.canvas.outerHTML),"Download"));
oN()}}function oP(a){setTimeout(function(){a.close()},500)}function nU(){e9(aV)}function lF(){st.mF();
return st.dr().lF()}function lG(b){if(!aV){oN()}mG(aV);
var a=new fr(aV,b);
st.mO(a);
if(d7){a.eW()}hz(aV);
nW(3)}function getReadOnly(){return st.gN}function setReadOnly(b){if(st.gN!=b){st.gN=b;
var a=$("#leftCol");
if(b){a.attr("data-width",a.attr("width"));
a.attr("width",1);
$(".toolbar").hide();
gf.fR();
st.mF();
mU();
hY(aV);
nU();
mX()}else{a.attr("width",a.attr("data-width"));
$(".toolbar").show();
a4=T}}}function getDisplayAtomNumbers(){return st.de}function setDisplayAtomNumbers(a){if(st.de!=a){st.de=a;
st.dr().eW()}}function highlightAtom(e,b,a){if(a==al){a=T}var d=st.dr().fN[bx(b)],c;
if(d){c=d.dV[e];
if(c){c.df=a;
c.eW()}}}function unhighlightAtoms(b){var a=st.dr(),e,d,c;
if(b!=al){e=a.fN[bx(b)];
for(c=bg(e.dV)-1;
c>=0;
c--){d=e.dV[c];
if(d.df){d.df=F;
d.eW()}}}else{for(c=bg(a.fN)-1;
c>=0;
c--){unhighlightAtoms(c)}}}function highlightBond(c,b,a){if(a==al){a=T}var d=st.dr().fN[bx(b)],e;
if(d){e=d.dk[c];
if(e){e.df=a;
e.eW()}}}function unhighlightBonds(b){var a=st.dr(),d,e,c;
if(b!=al){d=a.fN[bx(b)];
for(c=bg(d.dk)-1;
c>=0;
c--){e=d.dk[c];
if(e.df){e.df=F;
e.eW()}}}else{for(c=bg(a.fN)-1;
c>=0;
c--){unhighlightBonds(c)}}}function unhighlightAll(a){unhighlightAtoms(a);
unhighlightBonds(a)}function showURL(a){var c=$("#infoArea"),b=(gS?1.8:1);
if(!a){c.hide();
oN()}else{if(c.firstChild||(ny.x>600*b&&ny.y>400*b)||!open(a)){c.show().height("50%");
$("#infoContent").html("<iframe src="+bv(a)+' width="99%" height="'+(bd?0.5*ny.y:"95%")+'"/>');
oN()}}}function getMode(){return eg}function getParams(){return"?lang="+lang+"&mode="+eg+"&embedded="+(oy||"")}function mt(b,a){bd?(a?b.show():b.hide()):(a?b.slideDown():b.slideUp())}function getImgSt(a){return'<img src="icons/'+a+(d7?'.svg" width="'+iconSize+'" height="'+iconSize+'"':'.png"')}$(window).load(function(){aX=$("html");
aY=$("#newAtomSym");
aZ=$("#templateShortcuts");
a0=$("#templateName");
a1=$(".templatesMenu").css({opacity:0.85}).mouseleave({obj:this},oh);
a3=$("#editIcon");
$("#fileUpload").change(m6);
$.event.props.push("dataTransfer");
aX.bind("drop",m6).bind("dragover",m4).bind("dragend",bf).keydown(nj).keyup(nu);
$("#info").bind("contextmenu",stopPropagation);
if(ox){aX.bind("contextmenu",bf)}if(!ep){$("body").bind("contextmenu",bf)}aX.onscroll=bf;
if(gS){aX.bind("input",ni)}window.onresize=oN;
var a=M.min(aX.width(),aX.height());
hM=oM(0.01*a);
ou=M.min(600,a)+am;
oN();
var b=aW.offset();
$("#overlay").css({left:b.left+am,top:b.top+am});
if(eg=="rxn"){$(".modeRxn").show()}else{if(eg=="tmpl"){$(".modeTmpl").show()}else{$(".modeMol").show()}}if(!bd&&!oy){$(".modeFile").show()}if(oy){$("#copyright").hide();
$("#info").css("font-size","7pt")
}if(bB("readonly")){setReadOnly(T)}else{$(au+" > img").mouseenter(na).click(m8);
$(au).mouseleave(nb).click(nb);
$(at).click(m_);
$(".tool").click(nd);
$("td.separator + td").addClass("afterSeparator");
setTimeout(function(){of()},50);
bF();
m2(".defaultTool");
if(!bB("nofocus")){aY.focus().blur()}}$.rule(at).css("left",(iconSize+6)+"px");
if(gS){a2=$("#touchCursor").show();
$.rule("input,.button").css("font-size","20pt");
aY.click(function(){this.select()})}isReady=T});
function cleanStructure(d){st.mF();
var e,c=st.gj(),f=[],b,a;
hw();
if(c.fS()){f.push(st.dr())}else{f=c.ml()}for(b=0,a=bg(f);
b<a;
b++){e=f[b];
e.jl(d);
e.eW()}hz(aV);
nW(3);
if(oq&&gP==aQ){os()}}function lK(e){var g=this,f=g.fN,b,d,a,c=0,h;
g.kB(F);
for(d=bg(g.kg)-1;
d>=0;
d--){g.kA(g.kg[d],T)}for(d=bg(f)-1;
d>=0;
d--){b=f[d];
if(!bg(b.dV)){bV(b,g.fN);
if(d<g.ki){g.ki--}}}h=g.ki;
for(d=0,a=bg(f);
d<a;
d++){b=f[d];
b.jl(e);
if(d==h){g.lc(c,al,T);
c+=k0+d3}else{if(d>0){g.ky(c,0,T);
c+=dw+d3}}b.dT();
b.jC(c);
c+=(b.c3.x-b.c5.x)+d3}if(d==h){g.lc(c)}g.ki=h;
nW(3);
mU()}function ke(d){if(!this.jx){this.ir()}for(var e=this,c=e.kb(),b=0,a=bg(e.jx);
b<a;
b++){e.jx[b].jl(d,c)}}function jm(c,b){var d=this,a=d.dW().b4();
new oQ(d,c,b);
d.cl(a.cq(d.dW()))}function oR(){var e=this,c=e.h5,g,h,f=e.oS(),l=e.oT(),b=e.oU(),j,d,a,i=oJ,k=c.jn();
while((e.oV=f+l+b)>oK){if(g==1||(!g&&b>f)){e.oW(i);
h=1}else{e.oX(i);
h=2}j=e.oS();
d=e.oT();
a=e.oU();
if(j+d+a<e.oV){f=j;
l=d;
b=a;
k=c.jn();
i*=0.98}else{c.jo(k);
if(M.abs(i)<0.05){break}if(g){i*=0.5;
g=0}else{i*=-0.8;
if(h==1){g=2}else{g=1}}}}}function oY(){var d=this,b=!d.oZ,c=d.h5,l,g,f,k,e,a,n,m,h,o=0;
d.o0=[];
for(l=0,g=bg(c.dV);
l<g;
l++){k=c.dV[l];
for(f=0;
f<l;
f++){e=c.dV[f];
a=k.c0.cK(e.c0,b);
if((n=j3*(b?1:2)-a)>0){m=j4*n*n;
d.o0.push(new o1(k,e,a,n,m));
o+=m}}if(b){o+=M.abs(k.c0.z)}}for(l=0,g=bg(c.dk);
l<g;
l++){k=c.dk[l];
h=c4;
if(k.dl==0){h*=1.3}a=k.cZ.c0.cK(k.c1.c0,b);
if(a!=h){d.o0.push(k)}k.o2=h;
k.bg=a;
n=M.abs(h-a);
m=(a>oG?n:n*oH);
k.o3=m;
o+=m}return o}function o4(){var r=this,f=!r.oZ,k=r.h5,n,l,m,p,b,c,u,t,a,v,e,h,g,q,o=0;
for(n=0,l=bg(k.dk);
n<l;
n++){c=k.dk[n];
u=c.cZ;
t=c.c1;
a=t.c0.cq(u.c0,f);
if(!a.x&&!a.y&&!a.z){o+=oI;
continue}e=a.cs();
g=al;
for(m=0,p=bg(k.dV);
m<p;
m++){b=k.dV[m];
if(!b.bJ(u)&&!b.bJ(t)){v=b.c0.cq(u.c0,f);
if((q=oG-e.ch(v).bg())>0){if((h=a.ce(v))>=0&&h<=(g||(g=a.ce(a)))){o+=oI*q*q}}}}}return o}function o5(){var e=this,b,a,d,f,c=0;
for(b=0,a=bg(e.o6);
b<a;
b++){d=e.o6[b];
d.o7();
f=oE*(oF*d.cK*d.cK+M.abs(d.cK));
d.o3=f;
c+=f}return c}function o8(){for(var f=this,d=0,c,a,e=[],b;
d<3;
d++){f.o9[d].o7()}f.cK=0;
if(a=f.o_){for(d=0;
d<3;
d++){e[d]=[];
for(c=0;
c<3;
c++){e[d][c]=(f.o9[d].pa?M.abs(a[c]-f.o9[d].o_):0)}}b=pb(e);
for(d=0;
d<3;
d++){for(c=0;
c<3;
c++){if(f.o9[d].pa){if(c!=b[d]){e[d][c]=an}}else{e[d][c]=M.abs(a[c]-f.o9[d].o_)}}}b=pb(e);

for(d=0;
d<3;
d++){f.cK+=(f.o9[d].o_=e[d][b[d]])}}}function pb(e){for(var g=0,b=bg(e),j=[],h=[],f,a,l,d;
g<b;
g++){h[g]=0;
j[g]=g}d=pc(e,j);
l=j.slice();
g=1;
while(d>0&&g<b){if(h[g]<g){f=g%2&&h[g];
a=j[g];
j[g]=j[f];
j[f]=a;
++h[g];
g=1;
if(pc(e,j)<d){l=j.slice()}}else{h[g]=0;
++g}}return l}function pc(e,d){for(var b=0,c=0,a=bg(d);
b<a;
b++){c+=e[b][d[b]]}return c}function pd(){var d=this,b=d.pe,c=d.pf,a=d.go;
d.pg=(d.ph.oZ?jU(a,c,b):eq(a,c,b));
d.cK=d.pg-d.o_}function pi(){var c=this,b=c.go,a=bg(b.dk);
if(a>3||a==b.gx()){if(a<5){c.o_=[ai,ai,ai]}else{if(a==5){c.o_=[ac,ac,ad]}else{if(a==6){c.o_=[ac,ac,ac]}else{if(a==7){c.o_=[72,ac,ac]}else{if(a==8){c.o_=[0.5*ai,ac,ac]}}}}}}else{c.o_=[ad,ad,ad]}}function pj(b){var h=this,a=h.ph,f=h.go,d=bg(f.dk),e=f.gx(),c=f.di,g;
if(e==4&&d==2){h.o_=ae}else{if((a.oZ?d==e:d==4)&&(c=="P"||c=="S")){h.o_=ac}else{if(a.oZ&&(c=="P"||c=="S"||d==e)){h.o_=ai}else{if(d==6||(d>3&&h.pg<90)){h.o_=60}else{if((g=a.pk)&&bg(g)&&d==3&&(c=="N"||c=="P")){h.o_=(b?210:(a.oZ?90:75))}else{if(d==2&&h.pg>ae){h.o_=240}else{h.o_=ad}}}}}}}function pl(d,c){if(d.o3==c.o3){return 0}if(d.o3==undefined||d.o3<c.o3){return 1}return -1}function pm(l){var n=this.o0,k=this.oZ,j,g,h,f,e,a,c,b,r,q,p=0,d,o,m;
if(g=bg(n)){l=M.abs(l);
n.sort(pl);
for(j=0;
j<g;
j++){h=n[j];
if(h.o3<0.1){break}if(j/g<M.random()){a=h.bg;
c=h.cZ;
b=h.c1;
r=l*(b.c0.x-c.c0.x)*(h.o2-a)/a;
q=l*(b.c0.y-c.c0.y)*(h.o2-a)/a;
if(k){p=l*(b.c0.z-c.c0.z)*(h.o2-a)/a}o=bg(c.dk);
m=bg(b.dk);
d=o+m;
o/=d;
m/=d;
if(!(h instanceof gg)||bg(h.dU())==0){f=c.g1(b);
f.fn(h);
e=b.g1(c);
e.fn(h)}else{f=c.c0;
e=b.c0}f.cl(-r*m,-q*m,-p*m);
e.cl(r*o,q*o,p*o)}}if(!k){l=0.9-l;
for(n=this.h5.fa(),j=g-1;
j>=0;
j--){n[j].z*=l}}this.h5.cs()}}function pn(b,a){return(M.abs(b.cK)<31-M.abs(a)*50?0:(b.cK>0?-1:1))}function po(w){var A=this.o6,x=this.pp,E,z,D,K,B,r,a,b,l,J,g=[],G,v,e,o,n,h,f,m=[],q=(w>0?1:0),t,I,u,L,d,p,y,N,c;
x.sort(pl);
for(E=0,z=bg(x);
E<z;
E++){f=F;
r=x[E];
b=r.go;
a=b.c0;
u=d=p=0;
L=a.eJ(r.pq[0].c0,r.pq[1].c0,r.pq[2].c0);
for(D=0;
D<3;
D++){l=r.dk[D];
L/=l.cZ.c0.cK(l.c1.c0)+Number.pr}if(t=(M.abs(L)<0.0001)){e=0;
for(D=0;
D<3;
D++){N=r.o9[D].pg;
e+=N;
if(N>u){u=r.o9[D].pg;
L=D}}e=(e<358);
u=pn(r.o9[L],w)}for(D=0;
D<3;
D++){d+=(J=pn(r.o9[D],w));
if(J==0){p++;
if(!t){L=D}}}if(p<3){y=[];
for(D=0;
D<3;
D++){l=r.dk[D];
if(bg(l.dU())){N=new g0(T);
N.fI(l);
N.fE(l.gt(b));
f=T}else{N=l.g1(b)}y.push(N)}if(t){c=r.o9[L];
if(M.abs(d)>1&&e){o=a.eF(c.pf.c0,c.pe.c0);
n=a.cD(o);
l=0;
for(D=0;
D<3;
D++){l+=(D==L?1:-1)*r.o9[D].cK;
g[D]=0}for(D=0;
D<3;
D++){if(D!=L){I=r.o9[D].cK+0.3*l;
for(B=0;
B<3;
B++){if(D!=B){g[B]+=(a.eJ(r.dk[B].gt(b).c0,r.dk[D].gt(b).c0,n)>0?1:-1)*I}}}}for(D=0;
D<3;
D++){y[D].ct(g[D]*af,o,a)}}if(d<0||(e&&u<d-u)||(r.o9[L].pg>175&&r.o9[L].cK>0)){I=0;
for(B=0;
B<3;
B++){if(!e||L!=B){I-=r.o9[B].cK}}c=a.eF(c.pf.c0,c.pe.c0,r.pq[L].c0);
for(B=0;
B<3;
B++){y[B].ct(bA((B==L?0.5:-0.25)*I*w,-30,30)*af,c,a)}}}if(M.abs(d)>(t?2:1)){I=0;
c=a.eK(r.pq[0].c0,r.pq[1].c0,r.pq[2].c0);
for(D=0;
D<3;
D++){for(B=0;

B<3;
B++){if(D!=B){I-=r.o9[B].cK}}y[D].ct(bA(I*M.abs(w),-30,30)*af,c[D],a)}}else{if(p==1&&(!t||u==0)){for(B=0;
B<3;
B++){if(L!=B){if((h=r.o9[B].cK)>0){o=B}else{n=B}I+=M.abs(h)}}if(o+n){c=a.eF(r.pq[n].c0,r.pq[o].c0);
y[L].ct(bA(0.5*I*M.abs(w),-30,30)*af,c,a)}}}}if(f){for(B=0;
B<3;
B++){c=this.ps[r.pq[B].bH];
for(D=0,K=bg(c);
D<K;
D++){c[D].o7()}}}else{for(B=0;
B<3;
B++){r.o9[B].o7()}}}if(bg(A)){A.sort(pl);
w=M.abs(w);
m=[];
for(E=0,z=bg(A);
E<z;
E++){r=A[E];
if(r.o3<1){break}if(E/z<M.random()&&(E+q)%2){b=r.go;
a=b.c0;
o=r.pf;
n=r.pe;
h=bg(o.dk);
f=bg(n.dk);
e=h+f;
c=a.eF(n.c0,o.c0);
if(K=bg(r.pt)){for(D=0;
D<K;
D++){G=r.pt[D];
v=G.g1(b);
v.ct(w/oJ/K*r.cK*af*(G.iJ(n)?1:-1),c,a)}}else{if(!bO(m,b)&&!bO(m,o)&&!bO(m,n)){m.push(b,o,n);
o.c0.ct(r.cK*w*f/e*af,c,a);
n.c0.ct(r.cK*-w*h/e*af,c,a)}}}this.h5.cs()}}}function pu(p){var o=this.o6,h,f,e,c,g,k,b,t,d,r,q,m,l,a=[],n=(p>0?1:0);
p=M.abs(p);
if(f=bg(o)){o.sort(pl);
for(h=0;
h<f;
h++){g=o[h];
if(g.o3<1){break}if(h/f<M.random()&&(h+n)%2){k=g.go.c0;
m=g.pf;
l=g.pe;
r=bg(m.dk);
q=bg(l.dk);
d=r+q;
if(c=bg(g.pt)){for(e=0;
e<c;
e++){b=g.pt[e];
t=b.g1(g.go);
t.eD(p/oJ/c*g.cK*af*(b.bJ(g.dk[0])?1:-1),k)}}else{if(!bO(a,g.go)&&!bO(a,m)&&!bO(a,l)){a.push(g.go,m,l);
m.c0.eD(g.cK*p*q/d*af,k);
l.c0.eD(g.cK*-p*r/d*af,k)}}}}this.h5.cs()}}function o1(b,a,c,e,d){this.cZ=b;
this.c1=a;
this.o2=j3;
this.bg=c;
this.cK=e;
this.o3=d}function pv(a,d,c,b){var e=this;
bG.apply(e);
e.ph=a;
e.go=d;
e.pf=c;
e.pe=b;
e.dk=[d.g5(c),d.g5(b)];
e.pw=px;
e.o7=pd;
e.py=pj;
e.o7()}function pz(a,e,d,c,b){var f=this;
bG.apply(f);
f.go=e;
f.pq=[d,c,b];
f.dk=[e.g5(d),e.g5(c),e.g5(b)];
f.o9=[a.pA(e,c,b),a.pA(e,d,b),a.pA(e,d,c)];
f.pw=pB;
f.o7=o8;
f.py=pi}function pC(g,f,d){for(var h=this,c=h.ps[g.bH],b,e=0,a=bg(c);
e<a;
e++){b=c[e];
if((f.bJ(b.pf)&&d.bJ(b.pe))||(f.bJ(b.pe)&&d.bJ(b.pf))){break}}if(e==a){b=new pv(h,g,f,d)}return b}function pD(h,b,a,j){var e=this,c=e.pE[h.bH],g,f,d;
if(c){for(g=0,f=bg(c);
g<f;
g++){d=c[g];
if(bO(d.pq,b)&&bO(d.pq,a)&&bO(d.pq,j)){break}}}else{c=[];
e.pE[h.bH]=c}if(g==f){d=new pz(e,h,b,a,j);
c.push(d);
e.pp.push(d);
d.pw()}return d}function pB(){for(var a=0;
a<3;
a++){this.o9[a].pw()}this.py()}function px(k){var b=this,f=b.ph,g=b.dk,e=bg(g)-1,d,c,h,j,a=(b.pg<ae||bg(b.go.dk)>2);
if(!b.pt){if(a){b.pt=[];
for(;
e>=0;
e--){if(!bg(g[e].dU())){b.pt.push(g[e])}}f.ps[b.go.bH].push(b)}j=bY(f.g3,g[0].dU(),g[1].dU());
if(d=bg(j)){for(e=0;
e<d;
e++){c=j[e];
h=f.pF[c.bH];
if(!h){h=[];
f.pF[c.bH]=h}if(a){h.push(b)}if(!c.o_){k=bg(c.dV);
c.o_=(f.oZ&&!c.i5()&&(k==8||(k==6&&c.i6()))?ai:pG(k))}}b.o_=(a?j[0].o_:aj-j[0].o_);
b.pa=T}else{b.py(k)}}return !!d}function pG(a){return ae-aj/a
}function pH(d,c){if(d.pg<c.pg){return 1}if(d.pg>c.pg){return -1}return 0}function pI(){var p,l,h,b,g,f,d,e=this,c=e.h5,t,u,r,q,o,a,w,v;
for(p=0,l=bg(c.dV);
p<l;
p++){t=c.dV[p];
u=t.dk;
a=[];
e.ps[t.bH]=[];
b=bg(u);
if(e.oZ&&b>2){for(h=0;
h<b;
h++){r=u[h];
for(g=h+1;
g<b;
g++){q=u[g];
for(f=g+1;
f<b;
f++){o=u[f];
for(d=f+1;
d<b;
d++){if(u[d].iK().eM(r.iK(),q.iK(),o.iK())){d=-1;
break}}if(d>0){e.pJ(t,r.gt(t),q.gt(t),o.gt(t))}}}}}else{if(b>1){for(h=0;
h<b;
h++){a.push(new gn(t,u[h].gt(t)))}a.sort(gp);
v=T;
for(h=0;
h<b;
h++){g=(h+1)%b;
w=e.pA(t,a[h].go,a[g].go);
if(!w.pw(v)){v=F}}}}b0(e.o6,e.ps[t.bH])}}function pK(){for(var d,a,g=this.h5.dV,h,f,n,k,m,b,l,e=0,c=bg(g);
e<c;
e++){h=g[e];
n=this.ps[h.bH];
if((a=bg(n))>2){m=0;
k=0;
if(!this.oZ||a<4){b=aj}else{if(a<7){b=ai}else{if(a<11){b=96}else{if(a<16||a>21){b=ac}else{b=82.29}}}b*=a}for(d=0;
d<a;
d++){f=n[d];
if(f.pa){m+=f.o_}else{k+=f.o_}}k+=m;
if(this.oZ?k>b:k!=b){if(m<b){l=(b-m)/(k-m);
for(d=0;
d<a;
d++){f=n[d];
if(!f.pa){f.o_*=l}}}else{l=b/k;
for(d=0;
d<a;
d++){f=n[d];
f.o_*=l}}}}}}function pL(){for(var d=this.h5.dk,c,b=0,a=bg(d);
b<a;
b++){c=d[b];
c.o2=al;
c.bg=al;
c.o3=al}d=this.g3;
a=bg(d);
for(b=0;
b<a;
b++){d[b].o_=al}}function pM(d){if(bg(d.dV)<10){var b=this,h=d.dV,k,f,a=d.o_,m=b.pF[d.bH],g,e=bg(m),p,n=0,o=0,j,c,l;
for(g=0;
g<e;
g++){p=m[g];
if(M.abs(p.o_-a)<oD){n++}else{o+=a-p.o_}}if(o){j=o/n;
for(g=0;
g<e;
g++){p=m[g];
if(M.abs(p.o_-a)<oD){p.o_+=j}}}d.i3();
e=bg(h);
if(b.oZ){d.iU();
if(a==ai){a=pG(e);
if(e==8){k=[[p=15,p,-p,-p,p,p,-p,-p,3]]}else{k=[[p=(ai-ac)*0.5,p,-p,p,p,-p,2],[p,-p,p,-p,p,-p,1]]}}if(k){f=an;
while(j=k.pop()){o=j.pop();
for(;
o>=0;
o--){c=0;
for(g=0;
g<e;
g++){c+=M.abs(d.i4(h[g])-j[g])}if(c<f){f=c;
n=j.slice()}if(f==0){break}if(o>0){bW(j)}}}j=n}a=ae-a;
k=h[0];
n=k.c0;
n.cl(d.iR.b_(-d.iR.ce(n.cq(d.fe))));
n.eC(0.5*c4/M.sin(0.5*a*af)/n.cK(d.fe),d.fe);
for(g=1;
g<e;
g++){k=h[g];
k.c0=n.b4();
k.c0.ct(a*g*af,d.iR,d.fe)}if(j){for(g=0;
g<e;
g++){k=h[g].c0;
k.ct(-j[g]*af,d.iR.ch(k.cq(d.fe)).cs(),d.fe)}}}else{for(g=1;
g<e;
g++){k=h[g];
f=h[g-1];
if(g==1){c=eq(f,k);
k.c0=cT(f.c0,c,c4)}else{p=bY(m,b.ps[k.bH]);
if(bg(p)==1){p=p[0];
if(!l){l=(h[2].c0.ey(h[0].c0,h[1].c0)?1:-1)}c+=(ae-p.o_)*l;
k.c0=cT(f.c0,c,c4)}}}}}}function pN(){for(var c=this,b=0,a=bg(c.g3);
b<a;
b++){c.pO(c.g3[b])}}function oQ(a,j,e){var b=this,g=[],f,h,l,d,c,k=1;
b.h5=a;
b.oZ=j;
b.o6=[];
b.pp=[];
b.ps={};
b.pE={};
b.pF={};
b.pk=e;
b.pP=pI;
b.oS=oY;
b.oT=o4;
b.oU=o5;
b.oX=pm;
b.oW=(j?po:pu);
b.pQ=pN;
b.pO=pM;
b.pR=pK;
b.jl=oR;
b.pS=pL;
b.pA=pC;
b.pJ=pD;
for(d=bg(a.h6)-1;
d>=0;
d--){c=a.h6[d];
if(c.type==ar){f=c.hg.slice();
h=c.dk.slice();
l=c.hf.slice();
c.h2(l,h);
g.push({di:c.di,dV:f,dk:h,hf:l})
}}b.g3=iL(a.dU());
b.pP();
do{b.pQ();
b.pR();
b.jl();
k--}while(k>0&&b.oV>oK);
b.pS();
for(d=bg(g)-1;
d>=0;
d--){c=g[d];
a.ef.hx(c.di,c.dV,c.dk,c.hf)}a.ff(ba)}hideMenu=nb;
getMolRxnfile=lF;
setMolRxnfile=lG;
centerView=oL;
zoomFit=nW;
redrawChanged=nU;
delSelection=mZ;
Point3D=ca;
pT=fr;
Molecule=fp;
Atom=gd;
Bond=gg;
Selection=g0;
